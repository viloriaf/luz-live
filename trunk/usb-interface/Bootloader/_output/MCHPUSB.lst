MP2COD 4.15, COFF to COD File Converter
Copyright (c) 2007 Microchip Technology Inc.
Listing File Generated: Thu Dec 13 14:22:56 2007


Address  Value    Disassembly              Source                                                                           File
-------  -------  -----------------------  -------------------------------------------------------------------------------  -----
                                           /* $Id: c018i.c,v 1.7 2006/11/15 22:53:12 moshtaa Exp $ */                       C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* Copyright (c)1999 Microchip Technology */                                     C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* MPLAB-C18 startup code, including initialized data */                         C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* external reference to __init() function */                                    C:\MCC18\src\traditional\startup\c018i.c
                                           extern void __init (void);                                                       C:\MCC18\src\traditional\startup\c018i.c
                                           /* external reference to the user's main routine */                              C:\MCC18\src\traditional\startup\c018i.c
                                           extern void main (void);                                                         C:\MCC18\src\traditional\startup\c018i.c
                                           /* prototype for the startup function */                                         C:\MCC18\src\traditional\startup\c018i.c
                                           void _entry (void);                                                              C:\MCC18\src\traditional\startup\c018i.c
                                           void _startup (void);                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* prototype for the initialized data setup */                                   C:\MCC18\src\traditional\startup\c018i.c
                                           void _do_cinit (void);                                                           C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           extern volatile near unsigned long short TBLPTR;                                 C:\MCC18\src\traditional\startup\c018i.c
                                           extern near unsigned FSR0;                                                       C:\MCC18\src\traditional\startup\c018i.c
                                           extern near char __FPFLAGS;                                                      C:\MCC18\src\traditional\startup\c018i.c
                                           #define RND 6                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma code _entry_scn=0x000000                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           void                                                                             C:\MCC18\src\traditional\startup\c018i.c
                                           _entry (void)                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
000000   efef     GOTO      0x7de          _asm goto _startup _endasm                                                       C:\MCC18\src\traditional\startup\c018i.c
000002   f003                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
000004   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma code _startup_scn                                                        C:\MCC18\src\traditional\startup\c018i.c
                                           void                                                                             C:\MCC18\src\traditional\startup\c018i.c
                                           _startup (void)                                                                  C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                             _asm                                                                           C:\MCC18\src\traditional\startup\c018i.c
                                               // Initialize the stack pointer                                              C:\MCC18\src\traditional\startup\c018i.c
0007de   ee13     LFSR      0x1,0x300          lfsr 1, _stack                                                               C:\MCC18\src\traditional\startup\c018i.c
0007e0   f000                                                                                                               
0007e2   ee23     LFSR      0x2,0x300          lfsr 2, _stack                                                               C:\MCC18\src\traditional\startup\c018i.c
0007e4   f000                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
0007e6   6af8     CLRF      0xf8,0x0           clrf TBLPTRU, 0 // 1st silicon doesn't do this on POR                        C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
0007e8   9c05     BCF       0x5,0x6,0x0        bcf __FPFLAGS,RND,0 // Initialize rounding flag for floating point libs      C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                               _endasm                                                                      C:\MCC18\src\traditional\startup\c018i.c
0007ea   ec72     CALL      0x6e4,0x0          _do_cinit ();                                                                C:\MCC18\src\traditional\startup\c018i.c
0007ec   f003                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           loop:                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             // If user defined __init is not found, the one in clib.lib will be used       C:\MCC18\src\traditional\startup\c018i.c
0007ee   ec04     CALL      0x808,0x0        __init ();                                                                     C:\MCC18\src\traditional\startup\c018i.c
0007f0   f004                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             // Call the user's main routine                                                C:\MCC18\src\traditional\startup\c018i.c
0007f2   ecdc     CALL      0x7b8,0x0        main ();                                                                       C:\MCC18\src\traditional\startup\c018i.c
0007f4   f003                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
0007f6   d7fb     BRA       0x7ee            goto loop;                                                                     C:\MCC18\src\traditional\startup\c018i.c
0007f8   0012     RETURN    0x0            }                               /* end _startup() */                             C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* MPLAB-C18 initialized data memory support */                                  C:\MCC18\src\traditional\startup\c018i.c
                                           /* The linker will populate the _cinit table */                                  C:\MCC18\src\traditional\startup\c018i.c
                                           extern far rom struct                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                             unsigned short num_init;                                                       C:\MCC18\src\traditional\startup\c018i.c
                                             struct _init_entry                                                             C:\MCC18\src\traditional\startup\c018i.c
                                             {                                                                              C:\MCC18\src\traditional\startup\c018i.c
                                               unsigned long from;                                                          C:\MCC18\src\traditional\startup\c018i.c
                                               unsigned long to;                                                            C:\MCC18\src\traditional\startup\c018i.c
                                               unsigned long size;                                                          C:\MCC18\src\traditional\startup\c018i.c
                                             }                                                                              C:\MCC18\src\traditional\startup\c018i.c
                                             entries[];                                                                     C:\MCC18\src\traditional\startup\c018i.c
                                           }                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                           _cinit;                                                                          C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma code _cinit_scn                                                          C:\MCC18\src\traditional\startup\c018i.c
                                           void                                                                             C:\MCC18\src\traditional\startup\c018i.c
                                           _do_cinit (void)                                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                             /* we'll make the assumption in the following code that these statics          C:\MCC18\src\traditional\startup\c018i.c
                                              * will be allocated into the same bank.                                       C:\MCC18\src\traditional\startup\c018i.c
                                              */                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             static short long prom;                                                        C:\MCC18\src\traditional\startup\c018i.c
                                             static unsigned short curr_byte;                                               C:\MCC18\src\traditional\startup\c018i.c
                                             static unsigned short curr_entry;                                              C:\MCC18\src\traditional\startup\c018i.c
                                             static short long data_ptr;                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             // Initialized data...                                                         C:\MCC18\src\traditional\startup\c018i.c
0006e4   0e2a     MOVLW     0x2a             TBLPTR = (short long)&_cinit;                                                  C:\MCC18\src\traditional\startup\c018i.c
0006e6   6ef6     MOVWF     0xf6,0x0                                                                                        
0006e8   0e00     MOVLW     0x0                                                                                             
0006ea   6ef7     MOVWF     0xf7,0x0                                                                                        
0006ec   0e00     MOVLW     0x0                                                                                             
0006ee   6ef8     MOVWF     0xf8,0x0                                                                                        
                                             _asm                                                                           C:\MCC18\src\traditional\startup\c018i.c
0006f0   0100     MOVLB     0x0                movlb data_ptr                                                               C:\MCC18\src\traditional\startup\c018i.c
0006f2   0009     TBLRDPOSTINC                 tblrdpostinc                                                                 C:\MCC18\src\traditional\startup\c018i.c
0006f4   50f5     MOVF      0xf5,0x0,0x0       movf TABLAT, 0, 0                                                            C:\MCC18\src\traditional\startup\c018i.c
0006f6   6f70     MOVWF     0x70,0x1           movwf curr_entry, 1                                                          C:\MCC18\src\traditional\startup\c018i.c
0006f8   0009     TBLRDPOSTINC                 tblrdpostinc                                                                 C:\MCC18\src\traditional\startup\c018i.c
0006fa   50f5     MOVF      0xf5,0x0,0x0       movf TABLAT, 0, 0                                                            C:\MCC18\src\traditional\startup\c018i.c
0006fc   6f71     MOVWF     0x71,0x1           movwf curr_entry+1, 1                                                        C:\MCC18\src\traditional\startup\c018i.c
                                             _endasm                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                               //while (curr_entry)                                                         C:\MCC18\src\traditional\startup\c018i.c
                                               //{                                                                          C:\MCC18\src\traditional\startup\c018i.c
                                               test:                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                               _asm                                                                         C:\MCC18\src\traditional\startup\c018i.c
0006fe   e103     BNZ       0x706               bnz 3                                                                       C:\MCC18\src\traditional\startup\c018i.c
000700   6770     TSTFSZ    0x70,0x1           tstfsz curr_entry, 1                                                         C:\MCC18\src\traditional\startup\c018i.c
000702   d001     BRA       0x706              bra 1                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                               _endasm                                                                      C:\MCC18\src\traditional\startup\c018i.c
000704   d03d     BRA       0x780              goto done;                                                                   C:\MCC18\src\traditional\startup\c018i.c
                                                 /* Count down so we only have to look up the data in _cinit                C:\MCC18\src\traditional\startup\c018i.c
                                                  * once.                                                                   C:\MCC18\src\traditional\startup\c018i.c
                                                  *                                                                         C:\MCC18\src\traditional\startup\c018i.c
                                                  * At this point we know that TBLPTR points to the top of the current      C:\MCC18\src\traditional\startup\c018i.c
                                                  * entry in _cinit, so we can just start reading the from, to, and         C:\MCC18\src\traditional\startup\c018i.c
                                                  * size values.                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                  */                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                                 _asm                                                                       C:\MCC18\src\traditional\startup\c018i.c
                                           	/* read the source address */                                                   C:\MCC18\src\traditional\startup\c018i.c
000706   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
000708   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
00070a   6f6b     MOVWF     0x6b,0x1       	movwf prom, 1                                                                   C:\MCC18\src\traditional\startup\c018i.c
00070c   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
00070e   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
000710   6f6c     MOVWF     0x6c,0x1       	movwf prom+1, 1                                                                 C:\MCC18\src\traditional\startup\c018i.c
000712   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
000714   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
000716   6f6d     MOVWF     0x6d,0x1       	movwf prom+2, 1                                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           	/* skip a byte since it's stored as a 32bit int */                              C:\MCC18\src\traditional\startup\c018i.c
000718   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                           	/* read the destination address directly into FSR0 */                           C:\MCC18\src\traditional\startup\c018i.c
00071a   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
00071c   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
00071e   6ee9     MOVWF     0xe9,0x0       	movwf FSR0L, 0                                                                  C:\MCC18\src\traditional\startup\c018i.c
000720   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
000722   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
000724   6eea     MOVWF     0xea,0x0       	movwf FSR0H, 0                                                                  C:\MCC18\src\traditional\startup\c018i.c
                                           	/* skip two bytes since it's stored as a 32bit int */                           C:\MCC18\src\traditional\startup\c018i.c
000726   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
000728   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                           	/* read the destination address directly into FSR0 */                           C:\MCC18\src\traditional\startup\c018i.c
00072a   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
00072c   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
00072e   6f6e     MOVWF     0x6e,0x1       	movwf curr_byte, 1                                                              C:\MCC18\src\traditional\startup\c018i.c
000730   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
000732   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
000734   6f6f     MOVWF     0x6f,0x1       	movwf curr_byte+1, 1                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           	/* skip two bytes since it's stored as a 32bit int */                           C:\MCC18\src\traditional\startup\c018i.c
000736   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
000738   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                 _endasm                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                 //prom = data_ptr->from;                                                   C:\MCC18\src\traditional\startup\c018i.c
                                                 //FSR0 = data_ptr->to;                                                     C:\MCC18\src\traditional\startup\c018i.c
                                                 //curr_byte = (unsigned short) data_ptr->size;                             C:\MCC18\src\traditional\startup\c018i.c
                                                 /* the table pointer now points to the next entry. Save it                 C:\MCC18\src\traditional\startup\c018i.c
                                                  * off since we'll be using the table pointer to do the copying            C:\MCC18\src\traditional\startup\c018i.c
                                                  * for the entry.                                                          C:\MCC18\src\traditional\startup\c018i.c
                                                  */                                                                        C:\MCC18\src\traditional\startup\c018i.c
00073a   cff6     MOVFF     0xff6,0x72           data_ptr = TBLPTR;                                                         C:\MCC18\src\traditional\startup\c018i.c
00073c   f072                                                                                                               
00073e   cff7     MOVFF     0xff7,0x73                                                                                      
000740   f073                                                                                                               
000742   cff8     MOVFF     0xff8,0x74                                                                                      
000744   f074                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                 /* now assign the source address to the table pointer */                   C:\MCC18\src\traditional\startup\c018i.c
000746   c06b     MOVFF     0x6b,0xff6           TBLPTR = prom;                                                             C:\MCC18\src\traditional\startup\c018i.c
000748   fff6                                                                                                               
00074a   c06c     MOVFF     0x6c,0xff7                                                                                      
00074c   fff7                                                                                                               
00074e   c06d     MOVFF     0x6d,0xff8                                                                                      
000750   fff8                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                 /* do the copy loop */                                                     C:\MCC18\src\traditional\startup\c018i.c
                                                 _asm                                                                       C:\MCC18\src\traditional\startup\c018i.c
                                                   // determine if we have any more bytes to copy                           C:\MCC18\src\traditional\startup\c018i.c
000752   0100     MOVLB     0x0            	movlb curr_byte                                                                 C:\MCC18\src\traditional\startup\c018i.c
000754   536e     MOVF      0x6e,0x1,0x1   	movf curr_byte, 1, 1                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           copy_loop:                                                                       C:\MCC18\src\traditional\startup\c018i.c
000756   e102     BNZ       0x75c          	bnz 2 // copy_one_byte                                                          C:\MCC18\src\traditional\startup\c018i.c
000758   536f     MOVF      0x6f,0x1,0x1   	movf curr_byte + 1, 1, 1                                                        C:\MCC18\src\traditional\startup\c018i.c
00075a   e007     BZ        0x76a          	bz 7 // done_copying                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           copy_one_byte:                                                                   C:\MCC18\src\traditional\startup\c018i.c
00075c   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
00075e   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
000760   6eee     MOVWF     0xee,0x0       	movwf POSTINC0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           	// decrement byte counter                                                       C:\MCC18\src\traditional\startup\c018i.c
000762   076e     DECF      0x6e,0x1,0x1   	decf curr_byte, 1, 1                                                            C:\MCC18\src\traditional\startup\c018i.c
000764   e2f8     BC        0x756          	bc -8 // copy_loop                                                              C:\MCC18\src\traditional\startup\c018i.c
000766   076f     DECF      0x6f,0x1,0x1           decf curr_byte + 1, 1, 1                                                 C:\MCC18\src\traditional\startup\c018i.c
000768   d7f9     BRA       0x75c          	bra -7 // copy_one_byte                                                         C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           done_copying:                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                 _endasm                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                 /* restore the table pointer for the next entry */                         C:\MCC18\src\traditional\startup\c018i.c
00076a   c072     MOVFF     0x72,0xff6           TBLPTR = data_ptr;                                                         C:\MCC18\src\traditional\startup\c018i.c
00076c   fff6                                                                                                               
00076e   c073     MOVFF     0x73,0xff7                                                                                      
000770   fff7                                                                                                               
000772   c074     MOVFF     0x74,0xff8                                                                                      
000774   fff8                                                                                                               
                                                 /* next entry... */                                                        C:\MCC18\src\traditional\startup\c018i.c
000776   0100     MOVLB     0x0                  curr_entry--;                                                              C:\MCC18\src\traditional\startup\c018i.c
000778   0770     DECF      0x70,0x1,0x1                                                                                    
00077a   0e00     MOVLW     0x0                                                                                             
00077c   5b71     SUBWFB    0x71,0x1,0x1                                                                                    
00077e   d7bf     BRA       0x6fe                goto test;                                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           done:                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           ;                                                                                C:\MCC18\src\traditional\startup\c018i.c
000780   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma config PLLDIV = 5                                                        C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma config CPUDIV = OSC1_PLL2                                                C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma config USBDIV = 2                                                        C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma config FOSC = HSPLL_HS                                                   C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma config FCMEN = OFF                                                       C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma config IESO = OFF                                                        C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma config PWRT = OFF                                                        C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma config BOR = OFF                                                         C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma config VREGEN = ON                                                       C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma config WDT = OFF                                                         C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma config MCLRE = ON                                                        C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma config PBADEN = OFF                                                      C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma config CCP2MX = OFF                                                      C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma config STVREN = OFF                                                      C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma config LVP = OFF                                                         C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma config XINST = OFF                                                       C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma config DEBUG = OFF                                                       C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma config WRTB = OFF                                                        C:\MCHPFSUSB\fw\Boot\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\main.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Boot\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\main.c
                                            *                Microchip USB Bootloader Version 1.0                           C:\MCHPFSUSB\fw\Boot\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\main.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\Boot\main.c
                                            * FileName:        main.c                                                       C:\MCHPFSUSB\fw\Boot\main.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\Boot\main.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\Boot\main.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\Boot\main.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\Boot\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\main.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\Boot\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\main.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\Boot\main.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\Boot\main.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\Boot\main.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\Boot\main.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\Boot\main.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\Boot\main.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\Boot\main.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\Boot\main.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\Boot\main.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\Boot\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\main.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\Boot\main.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\Boot\main.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\Boot\main.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\Boot\main.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\Boot\main.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\Boot\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\main.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\Boot\main.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\Boot\main.c
                                            * Rawin Rojvanit       11/19/04     Original.                                   C:\MCHPFSUSB\fw\Boot\main.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Boot\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\main.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\Boot\main.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\Boot\main.c
                                           #include "system\typedefs.h"                        // Required                  C:\MCHPFSUSB\fw\Boot\main.c
                                           #include "system\usb\usb.h"                         // Required                  C:\MCHPFSUSB\fw\Boot\main.c
                                           #include "io_cfg.h"                                 // Required                  C:\MCHPFSUSB\fw\Boot\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\main.c
                                           #include "system\usb\usb_compile_time_validation.h" // Optional                  C:\MCHPFSUSB\fw\Boot\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\main.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\Boot\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\main.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\Boot\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\main.c
                                           /** V E C T O R  R E M A P P I N G *******************************************/  C:\MCHPFSUSB\fw\Boot\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma code _HIGH_INTERRUPT_VECTOR = 0x000008                                   C:\MCHPFSUSB\fw\Boot\main.c
                                           void _high_ISR (void)                                                            C:\MCHPFSUSB\fw\Boot\main.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\main.c
000008   ef04     GOTO      0x808              _asm goto RM_HIGH_INTERRUPT_VECTOR _endasm                                   C:\MCHPFSUSB\fw\Boot\main.c
00000a   f004                                                                                                               
00000c   0012     RETURN    0x0            }                                                                                C:\MCHPFSUSB\fw\Boot\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma code _LOW_INTERRUPT_VECTOR = 0x000018                                    C:\MCHPFSUSB\fw\Boot\main.c
                                           void _low_ISR (void)                                                             C:\MCHPFSUSB\fw\Boot\main.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\main.c
000018   ef0c     GOTO      0x818              _asm goto RM_LOW_INTERRUPT_VECTOR _endasm                                    C:\MCHPFSUSB\fw\Boot\main.c
00001a   f004                                                                                                               
00001c   0012     RETURN    0x0            }                                                                                C:\MCHPFSUSB\fw\Boot\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\Boot\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\main.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\Boot\main.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\main.c
                                            * Function:        void main(void)                                              C:\MCHPFSUSB\fw\Boot\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\main.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Boot\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\main.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\main.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\main.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Boot\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\main.c
                                            * Overview:        Main program entry point.                                    C:\MCHPFSUSB\fw\Boot\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\main.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Boot\main.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\main.c
                                           void main(void)                                                                  C:\MCHPFSUSB\fw\Boot\main.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\main.c
0007b8   8494     BSF       0x94,0x2,0x0       TRISCbits.TRISC2 = 1;     // Reset value is already '1'                      C:\MCHPFSUSB\fw\Boot\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\main.c
                                               //Check Bootload Mode Entry Condition                                        C:\MCHPFSUSB\fw\Boot\main.c
0007ba   a482     BTFSS     0x82,0x2,0x0       if(PORTCbits.RC2 == 1)      // If not pressed, User Mode                     C:\MCHPFSUSB\fw\Boot\main.c
0007bc   d002     BRA       0x7c2                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\main.c
0007be   ef00     GOTO      0x800                  _asm goto RM_RESET_VECTOR _endasm                                        C:\MCHPFSUSB\fw\Boot\main.c
0007c0   f004                                                                                                               
                                               }//end if                                                                    C:\MCHPFSUSB\fw\Boot\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\main.c
                                               //Bootload Mode                                                              C:\MCHPFSUSB\fw\Boot\main.c
0007c2   9c94     BCF       0x94,0x6,0x0       mInitAllLEDs();                                                              C:\MCHPFSUSB\fw\Boot\main.c
0007c4   9e94     BCF       0x94,0x7,0x0                                                                                    
0007c6   0e80     MOVLW     0x80                                                                                            
0007c8   6e8b     MOVWF     0x8b,0x0                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Boot\main.c
0007ca   0e14     MOVLW     0x14               mInitializeUSBDriver();     // See usbdrv.h                                  C:\MCHPFSUSB\fw\Boot\main.c
0007cc   6e6f     MOVWF     0x6f,0x0                                                                                        
0007ce   ec1d     CALL      0x63a,0x0          USBCheckBusStatus();        // Modified to always enable USB module          C:\MCHPFSUSB\fw\Boot\main.c
0007d0   f003                                                                                                               
0007da   d7fb     BRA       0x7d2              while(1)                                                                     C:\MCHPFSUSB\fw\Boot\main.c
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\main.c
0007d2   ec28     CALL      0x650,0x0              USBDriverService();     // See usbdrv.c                                  C:\MCHPFSUSB\fw\Boot\main.c
0007d4   f003                                                                                                               
0007d6   ec1d     CALL      0x23a,0x0              BootService();          // See boot.c                                    C:\MCHPFSUSB\fw\Boot\main.c
0007d8   f001                                                                                                               
                                               }//end while                                                                 C:\MCHPFSUSB\fw\Boot\main.c
0007dc   0012     RETURN    0x0            }//end main                                                                      C:\MCHPFSUSB\fw\Boot\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\main.c
                                           #pragma code user = RM_RESET_VECTOR                                              C:\MCHPFSUSB\fw\Boot\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\main.c
                                           /** EOF main.c ***************************************************************/  C:\MCHPFSUSB\fw\Boot\main.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * FileName:        usbmmap.c                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * -usbmmap.c-                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * USB Memory Map                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * This file is the USB memory manager; it serves as a compile-time memory       C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * allocator for the USB endpoints. It uses the compile time options passed      C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * from usbcfg.h to instantiate endpoints and endpoint buffer.                   C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Each endpoint requires to have a set of Buffer Descriptor registers(BDT).     C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * A BDT is 4-byte long and has a specific RAM location for each endpoint.       C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * The BDT for endpoint 0 out is located at address 0x400 to 0x403.              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * The BDT for endpoint 0 in is located at address 0x404 to 0x407.               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * The BDT for endpoint 1 out is located at address 0x408 to 0x40B.              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * and so on... The above allocation assumes the Ping-Pong Buffer Mode 0 is      C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * used. These locations are already hard-wired in the silicon. The point        C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * of doing instantiation, i.e. volatile far BDT ep0Bo;, is to provide the       C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * C compiler a way to address each variable directly. This is very important    C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * because when a register can be accessed directly, it saves execution time     C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * and reduces program size.                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Endpoints are defined using the endpoint number and the direction             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * of transfer. For simplicity, usbmmap.c only uses the endpoint number          C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * in the BDT register allocation scheme. This means if the usbcfg.h states      C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * that the MAX_EP_NUMBER is number 1, then four BDTs will be                    C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * instantiated: one each for endpoint0 in and endpoint0 out, which must         C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * always be instantiated for control transfer by default, and one each sets     C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * for endpoint1 in and endpoint1 out. The naming convention for instantiating   C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * BDT is                                                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * ep<#>B<d>                                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * where # is the endpoint number, and d is the direction of                     C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * transfer, which could be either <i> or <o>.                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * The USB memory manager uses MAX_EP_NUMBER, as defined in usbcfg.h, to define  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * the endpoints to be instantiated. This represents the highest endpoint        C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * number to be allocated, not how many endpoints are used. Since the BDTs for   C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * endpoints have hardware-assigned addresses in Bank 4, setting this value too  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * high may lead to inefficient use of data RAM. For example, if an application  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * uses only endpoints EP0 and EP4, then the MAX_EP_NUMBER is 4, and not 2.      C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * The in-between endpoint BDTs in this example (EP1, EP2, and EP3) go unused,   C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * and the 24 bytes of memory associated with them are wasted. It does not make  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * much sense to skip endpoints, but the final decision lies with the user.      C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * The next step is to assign the instantiated BDTs to different                 C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * USB functions. The firmware framework fundamentally assumes that every USB    C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * function should know which endpoint it is using, i.e., the default control    C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * transfer should know that it is using endpoint 0 in and endpoint 0 out.       C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * A HID class can choose which endpoint it wants to use, but once chosen, it    C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * should always know the number of the endpoint.                                C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * The assignment of endpoints to USB functions is managed centrally             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * in usbcfg.h. This helps prevent the mistake of having more                    C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * than one USB function using the same endpoint. The "Endpoint Allocation"      C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * section in usbcfg.h provides examples for how to map USB endpoints to USB     C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * functions.                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Quite a few things can be mapped in that section. There is no                 C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * one correct way to do the mapping and the user has the choice to              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * choose a method that is most suitable to the application.                     C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Typically, however, a user will want to map the following for a given         C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * USB interface function:                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * 1. The USB interface ID                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * 2. The endpoint control registers (UEPn)                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * 3. The BDT registers (ep<#>B<d>)                                              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * 4. The endpoint size                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Example: Assume a USB device class "foo", which uses one out endpoint         C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *          of size 64-byte and one in endpoint of size 64-byte, then:           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * #define FOO_INTF_ID          0x00                                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * #define FOO_UEP              UEP1                                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * #define FOO_BD_OUT           ep1Bo                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * #define FOO_BD_IN            ep1Bi                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * #define FOO_EP_SIZE          64                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * The mapping above has chosen class "foo" to use endpoint 1.                   C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * The names are arbitrary and can be anything other than FOO_??????.            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * For abstraction, the code for class "foo" should use the abstract             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * definitions of FOO_BD_OUT,FOO_BD_IN, and not ep1Bo or ep1Bi.                  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Note that the endpoint size defined in the usbcfg.h file is again             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * used in the usbmmap.c file. This shows that the relationship between          C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * the two files are tightly related.                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * The endpoint buffer for each USB function must be located in the              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * dual-port RAM area and has to come after all the BDTs have been               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * instantiated. An example declaration is:                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * volatile far unsigned char[FOO_EP_SIZE] data;                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * The 'volatile' keyword tells the compiler not to perform any code             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * optimization on this variable because its content could be modified           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * by the hardware. The 'far' keyword tells the compiler that this variable      C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * is not located in the Access RAM area (0x000 - 0x05F).                        C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * For the variable to be globally accessible by other files, it should be       C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * declared in the header file usbmmap.h as an extern definition, such as        C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * extern volatile far unsigned char[FOO_EP_SIZE] data;                          C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Conclusion:                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * In a short summary, the dependencies between usbcfg and usbmmap can           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * be shown as:                                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * usbcfg[MAX_EP_NUMBER] -> usbmmap                                              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * usbmmap[ep<#>B<d>] -> usbcfg                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * usbcfg[EP size] -> usbmmap                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * usbcfg[abstract ep definitions] -> usb9/hid/cdc/etc class code                C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * usbmmap[endpoint buffer variable] -> usb9/hid/cdc/etc class code              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Data mapping provides a means for direct addressing of BDT and endpoint       C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * buffer. This means less usage of pointers, which equates to a faster and      C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * smaller program code.                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           /** U S B  G L O B A L  V A R I A B L E S ************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           byte usb_device_state;          // Device States: DETACHED, ATTACHED, ...        C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           USB_DEVICE_STATUS usb_stat;     // Global USB flags                              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           byte usb_active_cfg;            // Value of current configuration                C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           byte usb_alt_intf[MAX_NUM_INT]; // Array to keep track of the current alternate  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                           // setting for each interface ID                 C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           /** U S B  F I X E D  L O C A T I O N  V A R I A B L E S *********************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #pragma udata usbram4=0x400     //See Linker Script,usb4:0x400-0x4FF(256-byte)   C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Section A: Buffer Descriptor Table                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * - 0x400 - 0x4FF(max)                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * - MAX_EP_NUMBER is defined in autofiles\usbcfg.h                              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * - BDT data type is defined in system\usb\usbmmap.h                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #if(0 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep0Bo;         //Endpoint #0 BD Out                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep0Bi;         //Endpoint #0 BD In                              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #if(1 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep1Bo;         //Endpoint #1 BD Out                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep1Bi;         //Endpoint #1 BD In                              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #if(2 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep2Bo;         //Endpoint #2 BD Out                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep2Bi;         //Endpoint #2 BD In                              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #if(3 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep3Bo;         //Endpoint #3 BD Out                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep3Bi;         //Endpoint #3 BD In                              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #if(4 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep4Bo;         //Endpoint #4 BD Out                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep4Bi;         //Endpoint #4 BD In                              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #if(5 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep5Bo;         //Endpoint #5 BD Out                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep5Bi;         //Endpoint #5 BD In                              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #if(6 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep6Bo;         //Endpoint #6 BD Out                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep6Bi;         //Endpoint #6 BD In                              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #if(7 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep7Bo;         //Endpoint #7 BD Out                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep7Bi;         //Endpoint #7 BD In                              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #if(8 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep8Bo;         //Endpoint #8 BD Out                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep8Bi;         //Endpoint #8 BD In                              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #if(9 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep9Bo;         //Endpoint #9 BD Out                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep9Bi;         //Endpoint #9 BD In                              C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #if(10 <= MAX_EP_NUMBER)                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep10Bo;        //Endpoint #10 BD Out                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep10Bi;        //Endpoint #10 BD In                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #if(11 <= MAX_EP_NUMBER)                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep11Bo;        //Endpoint #11 BD Out                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep11Bi;        //Endpoint #11 BD In                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #if(12 <= MAX_EP_NUMBER)                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep12Bo;        //Endpoint #12 BD Out                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep12Bi;        //Endpoint #12 BD In                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #if(13 <= MAX_EP_NUMBER)                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep13Bo;        //Endpoint #13 BD Out                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep13Bi;        //Endpoint #13 BD In                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #if(14 <= MAX_EP_NUMBER)                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep14Bo;        //Endpoint #14 BD Out                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep14Bi;        //Endpoint #14 BD In                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #if(15 <= MAX_EP_NUMBER)                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep15Bo;        //Endpoint #15 BD Out                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BDT ep15Bi;        //Endpoint #15 BD In                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Section B: EP0 Buffer Space                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            ******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * - Two buffer areas are defined:                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *   A. CTRL_TRF_SETUP                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *      - Size = EP0_BUFF_SIZE as defined in autofiles\usbcfg.h                  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *      - Detailed data structure allows direct adddressing of bits and bytes.   C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *   B. CTRL_TRF_DATA                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *      - Size = EP0_BUFF_SIZE as defined in autofiles\usbcfg.h                  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *      - Data structure allows direct adddressing of the first 8 bytes.         C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * - Both data types are defined in system\usb\usbdefs\usbdefs_ep0_buff.h        C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far CTRL_TRF_SETUP SetupPkt;                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far CTRL_TRF_DATA CtrlTrfData;                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            * Section C: Buffer                                                             C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            ******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           volatile far BOOT_DATA_PACKET dataPacket;                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           /** EOF usbmmap.c ************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbmmap.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                Microchip USB Bootloader Version 1.0                           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * FileName:        usbdrv.c                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Rawin Rojvanit       11/19/04     Original.                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * -usbdrv.c-                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * This file contains functions that check the hardware interrupts for           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * USB events. The main function, USBDriverService(), should be called once      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * every main loop.                                                              C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * This is a mini-version of the actual usbdrv.c from the Microchip USB          C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Library. Many functions were removed to make the whole bootload application   C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * fit under 2KB, which is the size of the boot block.                           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           #include "io_cfg.h"             // Required for USBCheckBusStatus()              C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           void USBModuleEnable(void);                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           void USBModuleDisable(void);                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           void USBSuspend(void);                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           void USBWakeFromSuspend(void);                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           void USBProtocolResetHandler(void);                                              C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           void USB_SOF_Handler(void);                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           void USBStallHandler(void);                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           void USBErrorHandler(void);                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBCheckBusStatus(void)                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine enables/disables the USB module by monitoring   C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                  the USB power signal.                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           void USBCheckBusStatus(void)                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
00063a   0e08     MOVLW     0x8                UCON = 0b00001000;              // Enable USBEN only                         C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
00063c   6e6d     MOVWF     0x6d,0x0                                                                                        
                                               /*                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                * After enabling the USB module, it takes some time for the voltage         C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                * on the D+ or D- line to rise high enough to get out of the SE0 condition. C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                * The USB Reset interrupt should not be unmasked until the SE0 condition is C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                * cleared. This helps preventing the firmware from misinterpreting this     C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                * unique event as a USB bus reset from the USB host.                        C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
00063e   ba6d     BTFSC     0x6d,0x5,0x0       while(UCONbits.SE0);            // Blocking loop                             C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
000640   d7fe     BRA       0x63e                                                                                           
000642   6a68     CLRF      0x68,0x0           UIR = 0;                        // Clear all USB interrupts                  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
000644   0e11     MOVLW     0x11               UIE = 0b00010001;               // Unmask RESET & IDLE interrupts only       C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
000646   6e69     MOVWF     0x69,0x0                                                                                        
000648   0100     MOVLB     0x0                usb_device_state = POWERED_STATE;                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
00064a   0e02     MOVLW     0x2                                                                                             
00064c   6f7a     MOVWF     0x7a,0x1                                                                                        
00064e   0012     RETURN    0x0            }//end USBCheckBusStatus                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBDriverService(void)                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine is the heart of this firmware. It manages       C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                  all USB interrupts.                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Note:            Device state transitions through the following stages:       C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                  DETACHED -> ATTACHED -> POWERED -> DEFAULT ->                C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                  ADDRESS_PENDING -> ADDRESSED -> CONFIGURED -> READY          C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           void USBDriverService(void)                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                * Task A: Service USB Activity Interrupt                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
000650   5068     MOVF      0x68,0x0,0x0       if(UIRbits.ACTVIF && UIEbits.ACTVIE)                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
000652   0b04     ANDLW     0x4                                                                                             
000654   e006     BZ        0x662                                                                                           
000656   5069     MOVF      0x69,0x0,0x0                                                                                    
000658   0b04     ANDLW     0x4                                                                                             
00065a   e003     BZ        0x662                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
00065c   926d     BCF       0x6d,0x1,0x0           UCONbits.SUSPND = 0;                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
00065e   9469     BCF       0x69,0x2,0x0           UIEbits.ACTVIE = 0;                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
000660   9468     BCF       0x68,0x2,0x0           UIRbits.ACTVIF = 0;                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                               }//end if                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                * Task B: Service USB Bus Reset Interrupt.                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                * When bus reset is received during suspend, ACTVIF will be set first,      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                * once the UCONbits.SUSPND is clear, then the URSTIF bit will be asserted.  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                * This is why URSTIF is checked after ACTVIF.                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                *                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                * The USB reset flag is masked when the USB state is in                     C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                * DETACHED_STATE or ATTACHED_STATE, and therefore cannot                    C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                * cause a USB reset event during these two states.                          C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
000662   5068     MOVF      0x68,0x0,0x0       if(UIRbits.URSTIF && UIEbits.URSTIE)    USBProtocolResetHandler();           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
000664   0b01     ANDLW     0x1                                                                                             
000666   e004     BZ        0x670                                                                                           
000668   5069     MOVF      0x69,0x0,0x0                                                                                    
00066a   0b01     ANDLW     0x1                                                                                             
00066c   e001     BZ        0x670                                                                                           
00066e   d827     RCALL     0x6be                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                * Task C: Service other USB interrupts                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
000670   5068     MOVF      0x68,0x0,0x0       if(UIRbits.IDLEIF && UIEbits.IDLEIE)                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
000672   0b10     ANDLW     0x10                                                                                            
000674   e009     BZ        0x688                                                                                           
000676   5069     MOVF      0x69,0x0,0x0                                                                                    
000678   0b10     ANDLW     0x10                                                                                            
00067a   e006     BZ        0x688                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
00067c   8469     BSF       0x69,0x2,0x0           UIEbits.ACTVIE = 1;                     // Enable bus activity interrupt C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
00067e   9868     BCF       0x68,0x4,0x0           UIRbits.IDLEIF = 0;                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
000680   826d     BSF       0x6d,0x1,0x0           UCONbits.SUSPND = 1;                    // Put USB module in power conserve C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                                                           // mode, SIE clock inactive      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                   /* Now, go into power saving */                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
000682   8aa0     BSF       0xa0,0x5,0x0           PIE2bits.USBIE = 1;                     // Set wakeup source             C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
000684   0003     SLEEP                            Sleep();                                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
000686   9aa1     BCF       0xa1,0x5,0x0           PIR2bits.USBIF = 0;                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                               }//end if                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
000688   5068     MOVF      0x68,0x0,0x0       if(UIRbits.STALLIF && UIEbits.STALLIE)                                       C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
00068a   0b20     ANDLW     0x20                                                                                            
00068c   e009     BZ        0x6a0                                                                                           
00068e   5069     MOVF      0x69,0x0,0x0                                                                                    
000690   0b20     ANDLW     0x20                                                                                            
000692   e006     BZ        0x6a0                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
000694   a070     BTFSS     0x70,0x0,0x0           if(UEP0bits.EPSTALL == 1)                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
000696   d003     BRA       0x69e                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
000698   eca9     CALL      0x552,0x0                  USBPrepareForNextSetupTrf();        // Firmware Work-Around          C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
00069a   f002                                                                                                               
00069c   9070     BCF       0x70,0x0,0x0               UEP0bits.EPSTALL = 0;                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                   }//end if                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
00069e   9a68     BCF       0x68,0x5,0x0           UIRbits.STALLIF = 0;                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                               }//end if                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if the host has not sent a bus reset.     C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                * Once bus reset is received, the device transitions into the DEFAULT       C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                * state and is ready for communication.                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006a0   0e03     MOVLW     0x3                if(usb_device_state < DEFAULT_STATE) return;                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006a2   0100     MOVLB     0x0                                                                                             
0006a4   5d7a     SUBWF     0x7a,0x0,0x1                                                                                    
0006a6   e201     BC        0x6aa                                                                                           
0006a8   d009     BRA       0x6bc                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                * Task D: Servicing USB Transaction Complete Interrupt                      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006aa   5068     MOVF      0x68,0x0,0x0       if(UIRbits.TRNIF && UIEbits.TRNIE)                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006ac   0b08     ANDLW     0x8                                                                                             
0006ae   e006     BZ        0x6bc                                                                                           
0006b0   5069     MOVF      0x69,0x0,0x0                                                                                    
0006b2   0b08     ANDLW     0x8                                                                                             
0006b4   e003     BZ        0x6bc                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                    * USBCtrlEPService only services transactions over EP0.                 C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                    * It ignores all other EP transactions.                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                    */                                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006b6   ecbe     CALL      0x37c,0x0              USBCtrlEPService();                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006b8   f001                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                    * Other EP can be serviced later by responsible device class firmware.  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                    * Each device driver knows when an OUT or IN transaction is ready by    C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                    * checking the buffer ownership bit.                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                    * An OUT EP should always be owned by SIE until the data is ready.      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                    * An IN EP should always be owned by CPU until the data is ready.       C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                    *                                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                    * Because of this logic, it is not necessary to save the USTAT value    C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                    * of non-EP0 transactions.                                              C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                    */                                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006ba   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                               }//end if(UIRbits.TRNIF && UIEbits.TRNIE)                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006bc   0012     RETURN    0x0            }//end USBDriverService                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBProtocolResetHandler(void)                           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    A USB bus reset is received from the host.                   C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    Currently, this routine flushes any pending USB              C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                  transactions. It empties out the USTAT FIFO. This action     C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                  might not be desirable in some applications.                 C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Overview:        Once a USB bus reset is received from the host, this         C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                  routine should be called. It resets the device address to    C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                  zero, disables all non-EP0 endpoints, initializes EP0 to     C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                  be ready for default communication, clears all USB           C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                  interrupt flags, unmasks applicable USB interrupts, and      C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                  reinitializes internal state-machine variables.              C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           void USBProtocolResetHandler(void)                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006be   6a68     CLRF      0x68,0x0           UIR = 0;                        // Clears all USB interrupts                 C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006c0   0e7b     MOVLW     0x7b               UIE = 0b01111011;               // Enable all interrupts except ACTVIE       C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006c2   6e69     MOVWF     0x69,0x0                                                                                        
0006c4   6a6e     CLRF      0x6e,0x0           UADDR = 0x00;                   // Reset to default address                  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006c6   0e16     MOVLW     0x16               UEP0 = EP_CTRL|HSHK_EN;         // Init EP0 as a Ctrl EP, see usbdrv.h       C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006c8   6e70     MOVWF     0x70,0x0                                                                                        
0006ca   a668     BTFSS     0x68,0x3,0x0       while(UIRbits.TRNIF == 1)       // Flush any pending transactions            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006cc   d002     BRA       0x6d2                                                                                           
0006d0   d7fc     BRA       0x6ca                                                                                           
0006ce   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006d2   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;            // Make sure packet processing is enabled    C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006d4   eca9     CALL      0x552,0x0          USBPrepareForNextSetupTrf();    // Declared in usbctrltrf.c                  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006d6   f002                                                                                                               
0006d8   0100     MOVLB     0x0                usb_active_cfg = 0;             // Clear active configuration                C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006da   6b7c     CLRF      0x7c,0x1                                                                                        
0006dc   0100     MOVLB     0x0                usb_device_state = DEFAULT_STATE;                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
0006de   0e03     MOVLW     0x3                                                                                             
0006e0   6f7a     MOVWF     0x7a,0x1                                                                                        
0006e2   0012     RETURN    0x0            }//end USBProtocolResetHandler                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           /** EOF usbdrv.c *************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbdrv\usbdrv.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * FileName:        usb9.c                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Rawin Rojvanit       11/19/04     Original.                                   C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * -usb9.c-                                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * This main function in this file, USBCheckStdRequest() is called from the      C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * usbctrltrf.c to check if a standard USB request has been received or not.     C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * This is a mini-version of the actual usb9.c from the Microchip USB library.   C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Many functions are commented out to make the whole bootload application fit   C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * under 2KB, which is the size of the boot block.                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           #include "io_cfg.h"                     // Required for self_power status        C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           void USBStdGetDscHandler(void);                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           void USBStdSetCfgHandler(void);                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           void USBStdGetStatusHandler(void);                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           void USBStdFeatureReqHandler(void);                                              C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Function:        void USBCheckStdRequest(void)                                C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Overview:        This routine checks the setup data packet to see if it       C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                  knows how to handle it                                       C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           void USBCheckStdRequest(void)                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
00056e   0104     MOVLB     0x4                if(SetupPkt.RequestType != STANDARD) return;                                 C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
000570   5110     MOVF      0x10,0x0,0x1                                                                                    
000572   0b60     ANDLW     0x60                                                                                            
000574   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000576   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000578   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
00057a   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
00057c   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
00057e   0900     IORLW     0x0                                                                                             
000580   e001     BZ        0x584                                                                                           
000582   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
000584   5111     MOVF      0x11,0x0,0x1       switch(SetupPkt.bRequest)                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
000586   0a08     XORLW     0x8                                                                                             
000588   e039     BZ        0x5fc                                                                                           
00058a   0a01     XORLW     0x1                                                                                             
00058c   e035     BZ        0x5f8                                                                                           
00058e   0a0f     XORLW     0xf                                                                                             
000590   e00a     BZ        0x5a6                                                                                           
000592   0a03     XORLW     0x3                                                                                             
000594   e001     BZ        0x598                                                                                           
000596   0012     RETURN    0x0                                                                                             
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   case SET_ADR:                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
000598   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
00059a   0e01     MOVLW     0x1                                                                                             
00059c   6f61     MOVWF     0x61,0x1                                                                                        
00059e   0100     MOVLB     0x0                        usb_device_state = ADR_PENDING_STATE;       // Update state only     C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005a0   0e04     MOVLW     0x4                                                                                             
0005a2   6f7a     MOVWF     0x7a,0x1                                                                                        
                                                       /* See USBCtrlTrfInHandler() in usbctrltrf.c for the next step */    C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005a4   0012     RETURN    0x0                        break;                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   case GET_DSC:                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005a6   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005a8   0e01     MOVLW     0x1                                                                                             
0005aa   6f61     MOVWF     0x61,0x1                                                                                        
0005ac   0104     MOVLB     0x4                        if(SetupPkt.bDscType == DSC_DEV)                                     C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005ae   0513     DECF      0x13,0x0,0x1                                                                                    
0005b0   e107     BNZ       0x5c0                                                                                           
                                                       {                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005b2   0100     MOVLB     0x0                            pSrc.bRom = (rom byte*)&device_dsc;                              C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005b4   0e82     MOVLW     0x82                                                                                            
0005b6   6f62     MOVWF     0x62,0x1                                                                                        
0005b8   0e07     MOVLW     0x7                                                                                             
0005ba   6f63     MOVWF     0x63,0x1                                                                                        
0005bc   0e12     MOVLW     0x12                           wCount._word = sizeof(device_dsc);  // Set data count            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                       }                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005be   d013     BRA       0x5e6                      else if(SetupPkt.bDscType == DSC_CFG)                                C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005c0   0e02     MOVLW     0x2                                                                                             
0005c2   5d13     SUBWF     0x13,0x0,0x1                                                                                    
0005c4   e107     BNZ       0x5d4                                                                                           
                                                       {                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005c6   0100     MOVLB     0x0                            pSrc.bRom = (rom byte*)&cfg01;                                   C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005c8   0e94     MOVLW     0x94                                                                                            
0005ca   6f62     MOVWF     0x62,0x1                                                                                        
0005cc   0e07     MOVLW     0x7                                                                                             
0005ce   6f63     MOVWF     0x63,0x1                                                                                        
0005d0   0e20     MOVLW     0x20                           wCount._word = sizeof(cfg01);       // Set data count            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                       }                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005d2   d009     BRA       0x5e6                      else if(SetupPkt.bDscType == DSC_STR)                                C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005d4   0e03     MOVLW     0x3                                                                                             
0005d6   5d13     SUBWF     0x13,0x0,0x1                                                                                    
0005d8   e10a     BNZ       0x5ee                                                                                           
                                                       {                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005da   0100     MOVLB     0x0                            pSrc.bRom = (rom byte*)&sd000;                                   C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005dc   0eb4     MOVLW     0xb4                                                                                            
0005de   6f62     MOVWF     0x62,0x1                                                                                        
0005e0   0e07     MOVLW     0x7                                                                                             
0005e2   6f63     MOVWF     0x63,0x1                                                                                        
0005e4   0e04     MOVLW     0x4                            wCount._word = sizeof(sd000);       // Set data count            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005e6   0100     MOVLB     0x0                                                                                             
0005e8   6f66     MOVWF     0x66,0x1                                                                                        
0005ea   6b67     CLRF      0x67,0x1                                                                                        
                                                       }                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005ec   d002     BRA       0x5f2                      else                                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                           /*                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                            * This is required to stall the DEVICE_QUALIFIER request        C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                            */                                                              C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005ee   0100     MOVLB     0x0                            ctrl_trf_session_owner = MUID_NULL;                              C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005f0   6b61     CLRF      0x61,0x1                                                                                        
0005f2   0100     MOVLB     0x0                        usb_stat.ctrl_trf_mem = _ROM;               // Set memory type       C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005f4   837b     BSF       0x7b,0x1,0x1                                                                                    
0005f6   0012     RETURN    0x0                        break;                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   case SET_CFG:                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005f8   ef0c     GOTO      0x618                      USBStdSetCfgHandler();                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005fa   f003                                                                                                               
                                                       break;                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   case GET_CFG:                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005fc   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
0005fe   0e01     MOVLW     0x1                                                                                             
000600   6f61     MOVWF     0x61,0x1                                                                                        
000602   0100     MOVLB     0x0                        pSrc.bRam = (byte*)&usb_active_cfg;         // Set Source            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
000604   0e7c     MOVLW     0x7c                                                                                            
000606   6f62     MOVWF     0x62,0x1                                                                                        
000608   0e00     MOVLW     0x0                                                                                             
00060a   6f63     MOVWF     0x63,0x1                                                                                        
00060c   0100     MOVLB     0x0                        usb_stat.ctrl_trf_mem = _RAM;               // Set memory type       C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
00060e   937b     BCF       0x7b,0x1,0x1                                                                                    
000610   0100     MOVLB     0x0                        LSB(wCount) = 1;                            // Set data count        C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
000612   0e01     MOVLW     0x1                                                                                             
000614   6f66     MOVWF     0x66,0x1                                                                                        
000616   0012     RETURN    0x0                        break;                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //case GET_STATUS:                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //    USBStdGetStatusHandler();                                          C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //    break;                                                             C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //case CLR_FEATURE:                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //case SET_FEATURE:                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //    USBStdFeatureReqHandler();                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //    break;                                                             C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //case GET_INTF:                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //    ctrl_trf_session_owner = MUID_USB9;                                C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //    pSrc.bRam = (byte*)&usb_alt_intf+SetupPkt.bIntfID;  // Set source  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //    usb_stat.ctrl_trf_mem = _RAM;               // Set memory type     C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //    LSB(wCount) = 1;                            // Set data count      C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //    break;                                                             C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //case SET_INTF:                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //    ctrl_trf_session_owner = MUID_USB9;                                C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //    usb_alt_intf[SetupPkt.bIntfID] = SetupPkt.bAltID;                  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //    break;                                                             C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //case SET_DSC:                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   //case SYNCH_FRAME:                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   default:                                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                       break;                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                               }//end switch                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           }//end USBCheckStdRequest                                                        C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Function:        void USBStdGetDscHandler(void)                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard GET_DESCRIPTOR request.    C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                  It utilizes tables dynamically looks up descriptor size.     C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                  This routine should never have to be modified if the tables  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                  in usbdsc.c are declared correctly.                          C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //void USBStdGetDscHandler(void)                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //{                                                                              C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //    if(SetupPkt.bmRequestType == 0x80)                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //    {                                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        switch(SetupPkt.bDscType)                                              C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        {                                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            case DSC_DEV:                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                ctrl_trf_session_owner = MUID_USB9;                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                pSrc.bRom = (rom byte*)&device_dsc;                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                wCount._word = sizeof(device_dsc);          // Set data count  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                break;                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            case DSC_CFG:                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                ctrl_trf_session_owner = MUID_USB9;                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                pSrc.bRom = *(USB_CD_Ptr+SetupPkt.bDscIndex);                  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                wCount._word = *(pSrc.wRom+1);              // Set data count  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                break;                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            case DSC_STR:                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                ctrl_trf_session_owner = MUID_USB9;                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                pSrc.bRom = *(USB_SD_Ptr+SetupPkt.bDscIndex);                  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                wCount._word = *pSrc.bRom;                  // Set data count  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                break;                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        }//end switch                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        usb_stat.ctrl_trf_mem = _ROM;                       // Set memory type C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //    }//end if                                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //}//end USBStdGetDscHandler                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Function:        void USBStdSetCfgHandler(void)                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Overview:        This routine first disables all endpoints by clearing        C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                  UEP registers. It then configures (initializes) endpoints    C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                  specified in the modifiable section.                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           void USBStdSetCfgHandler(void)                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
000618   0100     MOVLB     0x0                ctrl_trf_session_owner = MUID_USB9;                                          C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
00061a   0e01     MOVLW     0x1                                                                                             
00061c   6f61     MOVWF     0x61,0x1                                                                                        
                                               //mDisableEP1to15();                          // See usbdrv.h                C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                               //ClearArray((byte*)&usb_alt_intf,MAX_NUM_INT);                              C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
00061e   c412     MOVFF     0x412,0x7c         usb_active_cfg = SetupPkt.bCfgValue;                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
000620   f07c                                                                                                               
000622   0104     MOVLB     0x4                if(SetupPkt.bCfgValue == 0)                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
000624   5112     MOVF      0x12,0x0,0x1                                                                                    
000626   e104     BNZ       0x630                                                                                           
000628   0100     MOVLB     0x0                    usb_device_state = ADDRESS_STATE;                                        C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
00062a   0e05     MOVLW     0x5                                                                                             
00062c   6f7a     MOVWF     0x7a,0x1                                                                                        
00062e   0012     RETURN    0x0                else                                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
000630   0100     MOVLB     0x0                    usb_device_state = CONFIGURED_STATE;                                     C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
000632   0e06     MOVLW     0x6                                                                                             
000634   6f7a     MOVWF     0x7a,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   /* Modifiable Section */                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
000636   ef16     GOTO      0x2c                   BootInitEP();                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
000638   f000                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                   /* End modifiable section */                                             C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                               }//end if(SetupPkt.bcfgValue == 0)                                           C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           }//end USBStdSetCfgHandler                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Function:        void USBStdGetStatusHandler(void)                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard GET_STATUS request         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //void USBStdGetStatusHandler(void)                                              C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //{                                                                              C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //    CtrlTrfData._byte0 = 0;                         // Initialize content      C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //    CtrlTrfData._byte1 = 0;                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //    switch(SetupPkt.Recipient)                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //    {                                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        case RCPT_DEV:                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            ctrl_trf_session_owner = MUID_USB9;                                C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            /*                                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //             * _byte0: bit0: Self-Powered Status [0] Bus-Powered [1] Self-Powered C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //             *         bit1: RemoteWakeup        [0] Disabled    [1] Enabled   C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //             */                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            if(self_power == 1)                     // self_power defined in io_cfg.h C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                CtrlTrfData._byte0|=0b000000001;    // Set bit0                C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            if(usb_stat.RemoteWakeup == 1)          // usb_stat defined in usbmmap.c C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                CtrlTrfData._byte0|=0b00000010;     // Set bit1                C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            break;                                                             C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        case RCPT_INTF:                                                        C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            ctrl_trf_session_owner = MUID_USB9;     // No data to update       C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            break;                                                             C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        case RCPT_EP:                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            ctrl_trf_session_owner = MUID_USB9;                                C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            /*                                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //             * _byte0: bit0: Halt Status [0] Not Halted [1] Halted             C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //             */                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            pDst.bRam = (byte*)&ep0Bo+(SetupPkt.EPNum*8)+(SetupPkt.EPDir*4);   C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            if(*pDst.bRam & _BSTALL)    // Use _BSTALL as a bit mask           C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                CtrlTrfData._byte0=0x01;// Set bit0                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            break;                                                             C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //    }//end switch                                                              C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //    if(ctrl_trf_session_owner == MUID_USB9)                                    C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //    {                                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        pSrc.bRam = (byte*)&CtrlTrfData;            // Set Source              C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        usb_stat.ctrl_trf_mem = _RAM;               // Set memory type         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        LSB(wCount) = 2;                            // Set data count          C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //    }//end if(...)                                                             C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //}//end USBStdGetStatusHandler                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Function:        void USBStdFeatureReqHandler(void)                           C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard SET & CLEAR FEATURES       C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                  requests                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //void USBStdFeatureReqHandler(void)                                             C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //{                                                                              C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //    if((SetupPkt.bFeature == DEVICE_REMOTE_WAKEUP)&&                           C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //       (SetupPkt.Recipient == RCPT_DEV))                                       C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //    {                                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        ctrl_trf_session_owner = MUID_USB9;                                    C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        if(SetupPkt.bRequest == SET_FEATURE)                                   C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            usb_stat.RemoteWakeup = 1;                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        else                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            usb_stat.RemoteWakeup = 0;                                         C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //    }//end if                                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //    if((SetupPkt.bFeature == ENDPOINT_HALT)&&                                  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //       (SetupPkt.Recipient == RCPT_EP)&&                                       C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //       (SetupPkt.EPNum != 0))                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //    {                                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        ctrl_trf_session_owner = MUID_USB9;                                    C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        /* Must do address calculation here */                                 C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        pDst.bRam = (byte*)&ep0Bo+(SetupPkt.EPNum*8)+(SetupPkt.EPDir*4);       C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        if(SetupPkt.bRequest == SET_FEATURE)                                   C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            *pDst.bRam = _USIE|_BSTALL;                                        C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        else                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        {                                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            if(SetupPkt.EPDir == 1) // IN                                      C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                *pDst.bRam = _UCPU;                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //            else                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //                *pDst.bRam = _USIE|_DAT0|_DTSEN;                               C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //        }//end if                                                              C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //    }//end if                                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           //}//end USBStdFeatureReqHandler                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           /** EOF usb9.c ***************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usb9\usb9.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * FileName:        usbdsc.c                                                     C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * -usbdsc.c-                                                                    C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * This file contains the USB descriptor information. It is used                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * in conjunction with the usbdsc.h file. When a descriptor is added             C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * or removed from the main configuration descriptor, i.e. CFG01,                C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * the user must also change the descriptor structure defined in                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * the usbdsc.h file. The structure is used to calculate the                     C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * descriptor size, i.e. sizeof(CFG01).                                          C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * A typical configuration descriptor consists of:                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * At least one configuration descriptor (USB_CFG_DSC)                           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * One or more interface descriptors (USB_INTF_DSC)                              C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * One or more endpoint descriptors (USB_EP_DSC)                                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * Naming Convention:                                                            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * To resolve ambiguity, the naming convention are as followed:                  C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * - USB_CFG_DSC type should be named cdxx, where xx is the                      C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *   configuration number. This number should match the actual                   C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *   index value of this configuration.                                          C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * - USB_INTF_DSC type should be named i<yy>a<zz>, where yy is the               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *   interface number and zz is the alternate interface number.                  C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * - USB_EP_DSC type should be named ep<##><d>_i<yy>a<zz>, where                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *   ## is the endpoint number and d is the direction of transfer.               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *   The interface name should also be listed as a suffix to identify            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *   which interface does the endpoint belong to.                                C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * Example:                                                                      C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * If a device has one configuration, two interfaces; interface 0                C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * has two endpoints (in and out), and interface 1 has one endpoint(in).         C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * Then the CFG01 structure in the usbdsc.h should be:                           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * #define CFG01 rom struct                            \                         C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * {   USB_CFG_DSC             cd01;                   \                         C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *     USB_INTF_DSC            i00a00;                 \                         C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep01o_i00a00;           \                         C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep01i_i00a00;           \                         C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *     USB_INTF_DSC            i01a00;                 \                         C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep02i_i01a00;           \                         C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * } cfg01                                                                       C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * Note the hierarchy of the descriptors above, it follows the USB               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * specification requirement. All endpoints belonging to an interface            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * should be listed immediately after that interface.                            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * Filling in the descriptor values in the usbdsc.c file:                        C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * Most items should be self-explanatory, however, a few will be                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * explained for clarification.                                                  C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * [Configuration Descriptor(USB_CFG_DSC)]                                       C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * The configuration attribute must always have the _DEFAULT                     C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * definition at the minimum. Additional options can be ORed                     C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * to the _DEFAULT attribute. Available options are _SELF and _RWU.              C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * These definitions are defined in the usbdefs_std_dsc.h file. The              C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * _SELF tells the USB host that this device is self-powered. The                C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * _RWU tells the USB host that this device supports Remote Wakeup.              C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * [Endpoint Descriptor(USB_EP_DSC)]                                             C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * Assume the following example:                                                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * sizeof(USB_EP_DSC),DSC_EP,_EP01_OUT,_BULK,64,0x00                             C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * The first two parameters are self-explanatory. They specify the               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * length of this endpoint descriptor (7) and the descriptor type.               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * The next parameter identifies the endpoint, the definitions are               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * defined in usbdefs_std_dsc.h and has the following naming                     C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * convention:                                                                   C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * _EP<##>_<dir>                                                                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * where ## is the endpoint number and dir is the direction of                   C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * transfer. The dir has the value of either 'OUT' or 'IN'.                      C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * The next parameter identifies the type of the endpoint. Available             C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * options are _BULK, _INT, _ISO, and _CTRL. The _CTRL is not                    C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * typically used because the default control transfer endpoint is               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * not defined in the USB descriptors. When _ISO option is used,                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * addition options can be ORed to _ISO. Example:                                C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * _ISO|_AD|_FE                                                                  C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * This describes the endpoint as an isochronous pipe with adaptive              C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * and feedback attributes. See usbdefs_std_dsc.h and the USB                    C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * specification for details. The next parameter defines the size of             C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * the endpoint. The last parameter in the polling interval.                     C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * Adding a USB String                                                           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * A string descriptor array should have the following format:                   C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * rom struct{byte bLength;byte bDscType;word string[size];}sdxxx={              C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * sizeof(sdxxx),DSC_STR,<text>};                                                C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * The above structure provides a means for the C compiler to                    C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * calculate the length of string descriptor sdxxx, where xxx is the             C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * index number. The first two bytes of the descriptor are descriptor            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * length and type. The rest <text> are string texts which must be               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * in the unicode format. The unicode format is achieved by declaring            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * each character as a word type. The whole text string is declared              C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * as a word array with the number of characters equals to <size>.               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * <size> has to be manually counted and entered into the array                  C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * declaration. Let's study this through an example:                             C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * if the string is "USB" , then the string descriptor should be:                C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * (Using index 02)                                                              C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * rom struct{byte bLength;byte bDscType;word string[3];}sd002={                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * sizeof(sd002),DSC_STR,'U','S','B'};                                           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * A USB project may have multiple strings and the firmware supports             C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * the management of multiple strings through a look-up table.                   C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * The look-up table is defined as:                                              C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * rom const unsigned char *rom USB_SD_Ptr[]={&sd000,&sd001,&sd002};             C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * The above declaration has 3 strings, sd000, sd001, and sd002.                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * Strings can be removed or added. sd000 is a specialized string                C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * descriptor. It defines the language code, usually this is                     C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * US English (0x0409). The index of the string must match the index             C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * position of the USB_SD_Ptr array, &sd000 must be in position                  C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * USB_SD_Ptr[0], &sd001 must be in position USB_SD_Ptr[1] and so on.            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * The look-up table USB_SD_Ptr is used by the get string handler                C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * function in usb9.c.                                                           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * The look-up table scheme also applies to the configuration                    C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * descriptor. A USB device may have multiple configuration                      C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * descriptors, i.e. CFG01, CFG02, etc. To add a configuration                   C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * descriptor, user must implement a structure similar to CFG01.                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * The next step is to add the configuration descriptor name, i.e.               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * cfg01, cfg02,.., to the look-up table USB_CD_Ptr. USB_CD_Ptr[0]               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * is a dummy place holder since configuration 0 is the un-configured            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * state according to the definition in the USB specification.                   C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * Descriptor specific type definitions are defined in:                          C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * system\usb\usbdefs\usbdefs_std_dsc.h                                          C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * Configuration information is defined in:                                      C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            * autofiles\usbcfg.h                                                            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           /** I N C L U D E S *************************************************/           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           /** C O N S T A N T S ************************************************/          C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           #pragma romdata                                                                  C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           /* Device Descriptor */                                                          C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           rom USB_DEV_DSC device_dsc=                                                      C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               sizeof(USB_DEV_DSC),    // Size of this descriptor in bytes                  C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               DSC_DEV,                // DEVICE descriptor type                            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               0x0200,                 // USB Spec Release Number in BCD format             C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               0x00,                   // Class Code                                        C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               0x00,                   // Subclass code                                     C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               0x00,                   // Protocol code                                     C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               EP0_BUFF_SIZE,          // Max packet size for EP0, see usbcfg.h             C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               0x04D8,                 // Vendor ID                                         C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               0x000b,                 // Product ID: PICDEM FS USB (Boot Mode)             C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               0x0000,                 // Device release number in BCD format               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               0x00,                   // Manufacturer string index                         C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               0x00,                   // Product string index                              C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               0x00,                   // Device serial number string index                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               0x01                    // Number of possible configurations                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           };                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           /* Configuration 1 Descriptor */                                                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           CFG01=                                                                           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               /* Configuration Descriptor */                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               sizeof(USB_CFG_DSC),    // Size of this descriptor in bytes                  C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               DSC_CFG,                // CONFIGURATION descriptor type                     C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               sizeof(cfg01),          // Total length of data for this cfg                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               1,                      // Number of interfaces in this cfg                  C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               1,                      // Index value of this configuration                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               0,                      // Configuration string index                        C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               _DEFAULT,               // Attributes, see usbdefs_std_dsc.h                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               50,                     // Max power consumption (2X mA)                     C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               /* Interface Descriptor */                                                   C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               sizeof(USB_INTF_DSC),   // Size of this descriptor in bytes                  C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               DSC_INTF,               // INTERFACE descriptor type                         C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               0,                      // Interface Number                                  C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               0,                      // Alternate Setting Number                          C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               2,                      // Number of endpoints in this intf                  C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               0x00,                   // Class code                                        C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               0x00,                   // Subclass code                                     C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               0x00,                   // Protocol code                                     C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               0,                      // Interface string index                            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               /* Endpoint Descriptors */                                                   C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP01_OUT,_BULK,BOOT_EP_SIZE,0x00,                 C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP01_IN,_BULK,BOOT_EP_SIZE,0x00                   C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           };                                                                               C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[1];}sd000={                    C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           sizeof(sd000),DSC_STR,0x0409};                                                   C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           /** EOF usbdsc.c ****************************************************/           C:\MCHPFSUSB\fw\Boot\autofiles\usbdsc.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * FileName:        usbctrltrf.c                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * -usbctrltrf.c-                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * This file contains functions which handle the Control Transfer mechanism.     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * The only function that is of interest to an end user is the                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * USBCtrlTrfSetupHandler(), which has a section that calls different            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * USB request handlers. A default call to the USBCheckStdRequest always         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * exist and cannot be removed. USBCheckStdRequest contains handlers             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * for the requests specified in chapter 9 of the USB specification.             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * If a request cannot be serviced by USBCheckStdRequest, then it means the      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * request is a class specific request. All device class request handlers        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * in a project should be called from USBCtrlTrfSetupHandler().                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * If no handlers in the project know how to service a request, then the         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * ctrl_trf_session_owner variable would still have the value of MUID_NULL.      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * The MUID_NULL value would cause the USBCtrlEPServiceComplete() to stall       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * the control endpoint, effectively telling the USB host that the               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * request cannot be serviced.                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * This is a mini-version of the actual usbctrltrf.c from the Microchip USB      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Library. Some functions were optimized to handle byte only operation instead  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * of supporting both byte and word operations.                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * This helps to decrease the the bootload application size to fit               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * under 2KB, which is the size of the boot block.                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           byte ctrl_trf_state;                // Control Transfer State                    C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           byte ctrl_trf_session_owner;        // Current transfer session owner            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           POINTER pSrc;                       // Data source pointer                       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           POINTER pDst;                       // Data destination pointer                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           WORD wCount;                        // Data counter                              C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfSetupHandler(void);                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfOutHandler(void);                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfInHandler(void);                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlEPService(void)                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    USTAT is loaded with a valid endpoint address.               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        USBCtrlEPService checks for three transaction types that     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  it knows how to service and services them:                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. EP0 SETUP                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. EP0 OUT                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. EP0 IN                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  It ignores all other types (i.e. EP1, EP2, etc.)             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlEPService(void)                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00037c   506c     MOVF      0x6c,0x0,0x0       if(USTAT == EP00_OUT)                                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00037e   e002     BZ        0x384                                                                                           
000380   0e00     MOVLW     0x0                                                                                             
000382   d001     BRA       0x386                                                                                           
000384   0e01     MOVLW     0x1                                                                                             
000386   0900     IORLW     0x0                                                                                             
000388   e00b     BZ        0x3a0                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00038a   0104     MOVLB     0x4                    if(ep0Bo.Stat.PID == SETUP_TOKEN)           // EP0 SETUP                 C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00038c   5100     MOVF      0x0,0x0,0x1                                                                                     
00038e   0b3c     ANDLW     0x3c                                                                                            
000390   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000392   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000394   080d     SUBLW     0xd                                                                                             
000396   e102     BNZ       0x39c                                                                                           
000398   efd9     GOTO      0x3b2                      USBCtrlTrfSetupHandler();                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00039a   f001                                                                                                               
                                                   else                                        // EP0 OUT                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00039c   efe2     GOTO      0x3c4                      USBCtrlTrfOutHandler();                                              C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00039e   f001                                                                                                               
                                               }                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003a0   506c     MOVF      0x6c,0x0,0x0       else if(USTAT == EP00_IN)                       // EP0 IN                    C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003a2   e002     BZ        0x3a8                                                                                           
0003a4   0e00     MOVLW     0x0                                                                                             
0003a6   d001     BRA       0x3aa                                                                                           
0003a8   0e01     MOVLW     0x1                                                                                             
0003aa   0904     IORLW     0x4                                                                                             
0003ac   e001     BZ        0x3b0                                                                                           
0003ae   d819     RCALL     0x3e2                  USBCtrlTrfInHandler();                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003b0   0012     RETURN    0x0            }//end USBCtrlEPService                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfSetupHandler(void)                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    SetupPkt buffer is loaded with valid USB Setup Data          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine is a task dispatcher and has 3 stages.          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. It initializes the control transfer state machine.        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. It calls on each of the module that may know how to       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     service the Setup Request from the host.                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     Module Example: USB9, HID, CDC, MSD, ...                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     As new classes are added, ClassReqHandler table in        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     usbdsc.c should be updated to call all available          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     class handlers.                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. Once each of the modules has had a chance to check if     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     it is responsible for servicing the request, stage 3      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     then checks direction of the transfer to determine how    C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     to prepare EP0 for the control transfer.                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     Refer to USBCtrlEPServiceComplete() for more details.     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            Microchip USB Firmware has three different states for        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  the control transfer state machine:                          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. WAIT_SETUP                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. CTRL_TRF_TX                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. CTRL_TRF_RX                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Refer to firmware manual to find out how one state           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  is transitioned to another.                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  A Control Transfer is composed of many USB transactions.     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  When transferring data over multiple transactions,           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  it is important to keep track of data source, data           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  destination, and data count. These three parameters are      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  stored in pSrc,pDst, and wCount. A flag is used to           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  note if the data source is from ROM or RAM.                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfSetupHandler(void)                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                               byte i;                                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 1 */                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003b2   0100     MOVLB     0x0                ctrl_trf_state = WAIT_SETUP;                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003b4   6b60     CLRF      0x60,0x1                                                                                        
0003b6   6b61     CLRF      0x61,0x1           ctrl_trf_session_owner = MUID_NULL;     // Set owner to NULL                 C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003b8   6b66     CLRF      0x66,0x1           wCount._word = 0;                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003ba   6b67     CLRF      0x67,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 2 */                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003bc   ecb7     CALL      0x56e,0x0          USBCheckStdRequest();                   // See system\usb9\usb9.c            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003be   f002                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Modifiable Section */                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Insert other USB Device Class Request Handlers here */                    C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                               /* End Modifiable Section */                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 3 */                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003c0   ef64     GOTO      0x4c8              USBCtrlEPServiceComplete();                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003c2   f002                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           }//end USBCtrlTrfSetupHandler                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfOutHandler(void)                              C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine handles an OUT transaction according to         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  which control transfer state is currently active.            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            Note that if the the control transfer was from               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  host to device, the session owner should be notified         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  at the end of each OUT transaction to service the            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  received data.                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfOutHandler(void)                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003c4   0e02     MOVLW     0x2                if(ctrl_trf_state == CTRL_TRF_RX)                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003c6   0100     MOVLB     0x0                                                                                             
0003c8   5d60     SUBWF     0x60,0x0,0x1                                                                                    
0003ca   e109     BNZ       0x3de                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003cc   d85c     RCALL     0x486                  USBCtrlTrfRxService();                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                    * Don't have to worry about overwriting _KEEP bit                       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                    * because if _KEEP was set, TRNIF would not have been                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                    * generated in the first place.                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                    */                                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003ce   0104     MOVLB     0x4                    if(ep0Bo.Stat.DTS == 0)                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003d0   bd00     BTFSC     0x0,0x6,0x1                                                                                     
0003d2   d002     BRA       0x3d8                                                                                           
0003d4   0ec8     MOVLW     0xc8                       ep0Bo.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003d6   d001     BRA       0x3da                  else                                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003d8   0e88     MOVLW     0x88                       ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN;                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003da   6f00     MOVWF     0x0,0x1                                                                                         
                                               }                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003dc   0012     RETURN    0x0                else    // CTRL_TRF_TX                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003de   efa9     GOTO      0x552                  USBPrepareForNextSetupTrf();                                             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003e0   f002                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           }//end USBCtrlTrfOutHandler                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfInHandler(void)                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine handles an IN transaction according to          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  which control transfer state is currently active.            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            A Set Address Request must not change the acutal address     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  of the device until the completion of the control            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer. The end of the control transfer for Set Address    C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Request is an IN transaction. Therefore it is necessary      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  to service this unique situation when the condition is       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  right. Macro mUSBCheckAdrPendingState is defined in          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  usb9.h and its function is to specifically service this      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  event.                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfInHandler(void)                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003e2   0e04     MOVLW     0x4                mUSBCheckAdrPendingState();         // Must check if in ADR_PENDING_STATE    C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003e4   0100     MOVLB     0x0                                                                                             
0003e6   5d7a     SUBWF     0x7a,0x0,0x1                                                                                    
0003e8   e109     BNZ       0x3fc                                                                                           
0003ea   c412     MOVFF     0x412,0xf6e                                                                                     
0003ec   ff6e                                                                                                               
0003ee   506e     MOVF      0x6e,0x0,0x0                                                                                    
0003f0   0800     SUBLW     0x0                                                                                             
0003f2   e202     BC        0x3f8                                                                                           
0003f4   0e05     MOVLW     0x5                                                                                             
0003f6   d001     BRA       0x3fa                                                                                           
0003f8   0e03     MOVLW     0x3                                                                                             
0003fa   6f7a     MOVWF     0x7a,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003fc   0100     MOVLB     0x0                if(ctrl_trf_state == CTRL_TRF_TX)                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0003fe   0560     DECF      0x60,0x0,0x1                                                                                    
000400   e109     BNZ       0x414                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000402   d80a     RCALL     0x418                  USBCtrlTrfTxService();                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000404   0104     MOVLB     0x4                    if(ep0Bi.Stat.DTS == 0)                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000406   bd04     BTFSC     0x4,0x6,0x1                                                                                     
000408   d002     BRA       0x40e                                                                                           
00040a   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00040c   d001     BRA       0x410                  else                                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00040e   0e88     MOVLW     0x88                       ep0Bi.Stat._byte = _USIE|_DAT0|_DTSEN;                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000410   6f04     MOVWF     0x4,0x1                                                                                         
                                               }                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000412   0012     RETURN    0x0                else // CTRL_TRF_RX                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000414   efa9     GOTO      0x552                  USBPrepareForNextSetupTrf();                                             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000416   f002                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           }//end USBCtrlTrfInHandler                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfTxService(void)                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    pSrc, wCount, and usb_stat.ctrl_trf_mem are setup properly.  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine should be called from only two places.          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  One from USBCtrlEPServiceComplete() and one from             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  USBCtrlTrfInHandler(). It takes care of managing a           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer over multiple USB transactions.                     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            This routine works with isochronous endpoint larger than     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  256 bytes and is shown here as an example of how to deal     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  with BC9 and BC8. In reality, a control endpoint can never   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  be larger than 64 bytes.                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfTxService(void)                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                               byte byte_to_send;                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                * First, have to figure out how many byte of data to send.                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000418   0100     MOVLB     0x0                if(wCount._word < EP0_BUFF_SIZE)                                             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00041a   0e08     MOVLW     0x8                                                                                             
00041c   5d66     SUBWF     0x66,0x0,0x1                                                                                    
00041e   0e00     MOVLW     0x0                                                                                             
000420   5967     SUBWFB    0x67,0x0,0x1                                                                                    
000422   e203     BC        0x42a                                                                                           
000424   c066     MOVFF     0x66,0x69              byte_to_send = wCount._word;                                             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000426   f069                                                                                                               
000428   d002     BRA       0x42e              else                                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00042a   0e08     MOVLW     0x8                    byte_to_send = EP0_BUFF_SIZE;                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00042c   6f69     MOVWF     0x69,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00042e   c069     MOVFF     0x69,0x405         ep0Bi.Cnt = byte_to_send;                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000430   f405                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                * Subtract the number of bytes just about to be sent from the total.        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000432   5169     MOVF      0x69,0x0,0x1       wCount._word -= byte_to_send;                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000434   6e00     MOVWF     0x0,0x0                                                                                         
000436   6a01     CLRF      0x1,0x0                                                                                         
000438   5000     MOVF      0x0,0x0,0x0                                                                                     
00043a   5f66     SUBWF     0x66,0x1,0x1                                                                                    
00043c   5001     MOVF      0x1,0x0,0x0                                                                                     
00043e   5b67     SUBWFB    0x67,0x1,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000440   0e18     MOVLW     0x18               pDst.bRam = (byte*)&CtrlTrfData;        // Set destination pointer           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000442   6f64     MOVWF     0x64,0x1                                                                                        
000444   0e04     MOVLW     0x4                                                                                             
000446   6f65     MOVWF     0x65,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000448   5169     MOVF      0x69,0x0,0x1       while(byte_to_send)                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00044a   e01c     BZ        0x484                                                                                           
000482   d7e2     BRA       0x448                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00044c   0100     MOVLB     0x0                    if(usb_stat.ctrl_trf_mem == _ROM)                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00044e   a37b     BTFSS     0x7b,0x1,0x1                                                                                    
000450   d007     BRA       0x460                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000452   c062     MOVFF     0x62,0xff6                 *pDst.bRam = *pSrc.bRom;                                             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000454   fff6                                                                                                               
000456   c063     MOVFF     0x63,0xff7                                                                                      
000458   fff7                                                                                                               
00045a   0008     TBLRD                                                                                                     
00045c   50f5     MOVF      0xf5,0x0,0x0                                                                                    
                                                       pSrc.bRom++;                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                   }                                                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00045e   d005     BRA       0x46a                  else                                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                   {                                                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000460   c062     MOVFF     0x62,0xfe9                 *pDst.bRam = *pSrc.bRam;                                             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000462   ffe9                                                                                                               
000464   c063     MOVFF     0x63,0xfea                                                                                      
000466   ffea                                                                                                               
000468   50ef     MOVF      0xef,0x0,0x0                                                                                    
00046a   c064     MOVFF     0x64,0xfe9                                                                                      
00046c   ffe9                                                                                                               
00046e   c065     MOVFF     0x65,0xfea                                                                                      
000470   ffea                                                                                                               
000472   6eef     MOVWF     0xef,0x0                                                                                        
000474   0100     MOVLB     0x0                        pSrc.bRam++;                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000476   2b62     INCF      0x62,0x1,0x1                                                                                    
000478   0e00     MOVLW     0x0                                                                                             
00047a   2363     ADDWFC    0x63,0x1,0x1                                                                                    
                                                   }//end if else                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00047c   2b64     INCF      0x64,0x1,0x1           pDst.bRam++;                                                             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00047e   2365     ADDWFC    0x65,0x1,0x1                                                                                    
000480   0769     DECF      0x69,0x1,0x1           byte_to_send--;                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end while                                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000484   0012     RETURN    0x0            }//end USBCtrlTrfTxService                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfRxService(void)                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    pDst and wCount are setup properly.                          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  pSrc is always &CtrlTrfData                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  usb_stat.ctrl_trf_mem is always _RAM.                        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  wCount should be set to 0 at the start of each control       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer.                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        *** This routine is only partially complete. Check for       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  new version of the firmware.                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfRxService(void)                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                               byte byte_to_read;                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000486   c401     MOVFF     0x401,0x6a         byte_to_read = ep0Bo.Cnt;                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000488   f06a                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                * Accumulate total number of bytes read                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00048a   0100     MOVLB     0x0                wCount._word = wCount._word + byte_to_read;                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00048c   516a     MOVF      0x6a,0x0,0x1                                                                                    
00048e   2566     ADDWF     0x66,0x0,0x1                                                                                    
000490   6f66     MOVWF     0x66,0x1                                                                                        
000492   0e00     MOVLW     0x0                                                                                             
000494   2167     ADDWFC    0x67,0x0,0x1                                                                                    
000496   6f67     MOVWF     0x67,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000498   0e18     MOVLW     0x18               pSrc.bRam = (byte*)&CtrlTrfData;                                             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00049a   6f62     MOVWF     0x62,0x1                                                                                        
00049c   0e04     MOVLW     0x4                                                                                             
00049e   6f63     MOVWF     0x63,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004a0   516a     MOVF      0x6a,0x0,0x1       while(byte_to_read)                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004a2   e011     BZ        0x4c6                                                                                           
0004c4   d7ed     BRA       0x4a0                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004a4   c062     MOVFF     0x62,0xfe9             *pDst.bRam = *pSrc.bRam;                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004a6   ffe9                                                                                                               
0004a8   c063     MOVFF     0x63,0xfea                                                                                      
0004aa   ffea                                                                                                               
0004ac   50ef     MOVF      0xef,0x0,0x0                                                                                    
0004ae   c064     MOVFF     0x64,0xfe9                                                                                      
0004b0   ffe9                                                                                                               
0004b2   c065     MOVFF     0x65,0xfea                                                                                      
0004b4   ffea                                                                                                               
0004b6   6eef     MOVWF     0xef,0x0                                                                                        
0004b8   2b64     INCF      0x64,0x1,0x1           pDst.bRam++;                                                             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004ba   0e00     MOVLW     0x0                                                                                             
0004bc   2365     ADDWFC    0x65,0x1,0x1                                                                                    
0004be   2b62     INCF      0x62,0x1,0x1           pSrc.bRam++;                                                             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004c0   2363     ADDWFC    0x63,0x1,0x1                                                                                    
0004c2   076a     DECF      0x6a,0x1,0x1           byte_to_read--;                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end while(byte_to_read)                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004c6   0012     RETURN    0x0            }//end USBCtrlTrfRxService                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlEPServiceComplete(void)                          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine wrap up the ramaining tasks in servicing        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  a Setup Request. Its main task is to set the endpoint        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  controls appropriately for a given situation. See code       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  below.                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  There are three main scenarios:                              C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  a) There was no handler for the Request, in this case        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     a STALL should be sent out.                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  b) The host has requested a read control transfer,           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     endpoints are required to be setup in a specific way.     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  c) The host has requested a write control transfer, or       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     a control data stage is not required, endpoints are       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     required to be setup in a specific way.                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Packet processing is resumed by clearing PKTDIS bit.         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlEPServiceComplete(void)                                              C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004c8   0100     MOVLB     0x0                if(ctrl_trf_session_owner == MUID_NULL)                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004ca   5161     MOVF      0x61,0x0,0x1                                                                                    
0004cc   e10b     BNZ       0x4e4                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                    * If no one knows how to service this request then stall.               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                    * Must also prepare EP0 to receive the next SETUP transaction.          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                    */                                                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004ce   0104     MOVLB     0x4                    ep0Bo.Cnt = EP0_BUFF_SIZE;                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004d0   0e08     MOVLW     0x8                                                                                             
0004d2   6f01     MOVWF     0x1,0x1                                                                                         
0004d4   0e10     MOVLW     0x10                   ep0Bo.ADR = (byte*)&SetupPkt;                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004d6   6f02     MOVWF     0x2,0x1                                                                                         
0004d8   0e04     MOVLW     0x4                                                                                             
0004da   6f03     MOVWF     0x3,0x1                                                                                         
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004dc   0e84     MOVLW     0x84                   ep0Bo.Stat._byte = _USIE|_BSTALL;                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004de   6f00     MOVWF     0x0,0x1                                                                                         
0004e0   0104     MOVLB     0x4                    ep0Bi.Stat._byte = _USIE|_BSTALL;                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004e2   d023     BRA       0x52a              else    // A module has claimed ownership of the control transfer session.   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004e4   0104     MOVLB     0x4                    if(SetupPkt.DataDir == DEV_TO_HOST)                                      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004e6   af10     BTFSS     0x10,0x7,0x1                                                                                    
0004e8   d022     BRA       0x52e                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004ea   0100     MOVLB     0x0                        if(SetupPkt.wLength < wCount._word)                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004ec   5166     MOVF      0x66,0x0,0x1                                                                                    
0004ee   0104     MOVLB     0x4                                                                                             
0004f0   5d16     SUBWF     0x16,0x0,0x1                                                                                    
0004f2   0100     MOVLB     0x0                                                                                             
0004f4   5167     MOVF      0x67,0x0,0x1                                                                                    
0004f6   0104     MOVLB     0x4                                                                                             
0004f8   5917     SUBWFB    0x17,0x0,0x1                                                                                    
0004fa   e204     BC        0x504                                                                                           
0004fc   c416     MOVFF     0x416,0x66                     wCount._word = SetupPkt.wLength;                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
0004fe   f066                                                                                                               
000500   c417     MOVFF     0x417,0x67                                                                                      
000502   f067                                                                                                               
000504   df89     RCALL     0x418                      USBCtrlTrfTxService();                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000506   0100     MOVLB     0x0                        ctrl_trf_state = CTRL_TRF_TX;                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000508   0e01     MOVLW     0x1                                                                                             
00050a   6f60     MOVWF     0x60,0x1                                                                                        
                                                       /*                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Control Read:                                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * <SETUP[0]><IN[1]><IN[0]>...<OUT[1]> | <SETUP[0]>                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 1. Prepare OUT EP to respond to early termination                 C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * NOTE:                                                             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * If something went wrong during the control transfer,              C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the last status stage may not be sent by the host.                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * When this happens, two different things could happen              C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * depending on the host.                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * a) The host could send out a RESET.                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * b) The host could send out a new SETUP transaction                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    without sending a RESET first.                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * To properly handle case (b), the OUT EP must be setup             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * to receive either a zero length OUT transaction, or a             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * new SETUP transaction.                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Since the SETUP transaction requires the DTS bit to be            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * DAT0 while the zero length OUT status requires the DTS            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * bit to be DAT1, the DTS bit check by the hardware should          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * be disabled. This way the SIE could accept either of              C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the two transactions.                                             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Furthermore, the Cnt byte should be set to prepare for            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the SETUP data (8-byte or more), and the buffer address           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * should be pointed to SetupPkt.                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00050c   0104     MOVLB     0x4                        ep0Bo.Cnt = EP0_BUFF_SIZE;                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00050e   0e08     MOVLW     0x8                                                                                             
000510   6f01     MOVWF     0x1,0x1                                                                                         
000512   0e10     MOVLW     0x10                       ep0Bo.ADR = (byte*)&SetupPkt;                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000514   6f02     MOVWF     0x2,0x1                                                                                         
000516   0e04     MOVLW     0x4                                                                                             
000518   6f03     MOVWF     0x3,0x1                                                                                         
00051a   0e80     MOVLW     0x80                       ep0Bo.Stat._byte = _USIE;           // Note: DTSEN is 0!             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00051c   6f00     MOVWF     0x0,0x1                                                                                         
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                       /*                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 2. Prepare IN EP to transfer data, Cnt should have                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    been initialized by responsible request owner.                 C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00051e   0104     MOVLB     0x4                        ep0Bi.ADR = (byte*)&CtrlTrfData;                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000520   0e18     MOVLW     0x18                                                                                            
000522   6f06     MOVWF     0x6,0x1                                                                                         
000524   0e04     MOVLW     0x4                                                                                             
000526   6f07     MOVWF     0x7,0x1                                                                                         
000528   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00052a   6f04     MOVWF     0x4,0x1                                                                                         
                                                   }                                                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00052c   d010     BRA       0x54e                  else    // (SetupPkt.DataDir == HOST_TO_DEV)                             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                   {                                                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00052e   0100     MOVLB     0x0                        ctrl_trf_state = CTRL_TRF_RX;                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000530   0e02     MOVLW     0x2                                                                                             
000532   6f60     MOVWF     0x60,0x1                                                                                        
                                                       /*                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Control Write:                                                    C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * <SETUP[0]><OUT[1]><OUT[0]>...<IN[1]> | <SETUP[0]>                 C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 1. Prepare IN EP to respond to early termination                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    This is the same as a Zero Length Packet Response              C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    for control transfer without a data stage                      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000534   0104     MOVLB     0x4                        ep0Bi.Cnt = 0;                                                       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000536   6b05     CLRF      0x5,0x1                                                                                         
000538   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00053a   6f04     MOVWF     0x4,0x1                                                                                         
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                       /*                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 2. Prepare OUT EP to receive data.                                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00053c   0104     MOVLB     0x4                        ep0Bo.Cnt = EP0_BUFF_SIZE;                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00053e   0e08     MOVLW     0x8                                                                                             
000540   6f01     MOVWF     0x1,0x1                                                                                         
000542   0e18     MOVLW     0x18                       ep0Bo.ADR = (byte*)&CtrlTrfData;                                     C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000544   6f02     MOVWF     0x2,0x1                                                                                         
000546   0e04     MOVLW     0x4                                                                                             
000548   6f03     MOVWF     0x3,0x1                                                                                         
00054a   0ec8     MOVLW     0xc8                       ep0Bo.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00054c   6f00     MOVWF     0x0,0x1                                                                                         
                                                   }//end if(SetupPkt.DataDir == DEV_TO_HOST)                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end if(ctrl_trf_session_owner == MUID_NULL)                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                * PKTDIS bit is set when a Setup Transaction is received.                   C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                * Clear to resume packet processing.                                        C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00054e   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000550   0012     RETURN    0x0            }//end USBCtrlEPServiceComplete                                                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBPrepareForNextSetupTrf(void)                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        The routine forces EP0 OUT to be ready for a new Setup       C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transaction, and forces EP0 IN to be owned by CPU.           C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBPrepareForNextSetupTrf(void)                                             C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000552   0100     MOVLB     0x0                ctrl_trf_state = WAIT_SETUP;            // See usbctrltrf.h                  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000554   6b60     CLRF      0x60,0x1                                                                                        
000556   0104     MOVLB     0x4                ep0Bo.Cnt = EP0_BUFF_SIZE;              // Defined in usbcfg.h               C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000558   0e08     MOVLW     0x8                                                                                             
00055a   6f01     MOVWF     0x1,0x1                                                                                         
00055c   0e10     MOVLW     0x10               ep0Bo.ADR = (byte*)&SetupPkt;                                                C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00055e   6f02     MOVWF     0x2,0x1                                                                                         
000560   0e04     MOVLW     0x4                                                                                             
000562   6f03     MOVWF     0x3,0x1                                                                                         
000564   0e88     MOVLW     0x88               ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN;  // EP0 buff dsc init, see usbmmap.h  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
000566   6f00     MOVWF     0x0,0x1                                                                                         
000568   0104     MOVLB     0x4                ep0Bi.Stat._byte = _UCPU;               // EP0 IN buffer initialization      C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
00056a   6b04     CLRF      0x4,0x1                                                                                         
00056c   0012     RETURN    0x0            }//end USBPrepareForNextSetupTrf                                                 C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           /** EOF usbctrltrf.c *********************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\usbctrltrf\usbctrltrf.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *      Microchip USB C18 Firmware -  USB Bootloader Version 1.00                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * FileName:        boot.c                                                       C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Rawin Rojvanit       11/19/04    Original. USB Bootloader                     C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * -boot.c-                                                                      C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * This file contains functions necessary to carry out bootloading tasks.        C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * The only 2 USB specific functions are BootInitEP() and BootService().         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * All other functions can be reused with other communication methods.           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           #include "io_cfg.h"                                                              C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           byte counter;                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           byte byteTemp;                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           byte trf_state;                                                                  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           word big_counter;                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           void BlinkUSBStatus(void);                                                       C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           /** C L A S S  S P E C I F I C  R E Q ****************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           /** U S E R  A P I ***********************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Function:        void BootInitEP(void)                                        C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Overview:        BootInitEP initializes bootloader endpoints, buffer          C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                  descriptors, internal state-machine, and variables.          C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                  It should be called after the USB host has sent out a        C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                  SET_CONFIGURATION request.                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                  See USBStdSetCfgHandler() in usb9.c for examples.            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           void BootInitEP(void)                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00002c   0100     MOVLB     0x0                trf_state = WAIT_FOR_CMD;                                                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00002e   6b77     CLRF      0x77,0x1                                                                                        
000030   0e1e     MOVLW     0x1e               BOOT_UEP = EP_OUT_IN|HSHK_EN;               // Enable 2 data pipes           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000032   6e71     MOVWF     0x71,0x0                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                * Do not have to init Cnt of IN pipes here.                                 C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                * Reason:  Number of bytes to send to the host                              C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                *          varies from one transaction to                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                *          another. Cnt should equal the exact                              C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                *          number of bytes to transmit for                                  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                *          a given IN transaction.                                          C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                *          This number of bytes will only                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                *          be known right before the data is                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                *          sent.                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                */                                                                          C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000034   0104     MOVLB     0x4                BOOT_BD_OUT.Cnt = sizeof(dataPacket);   // Set buffer size                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000036   0e40     MOVLW     0x40                                                                                            
000038   6f09     MOVWF     0x9,0x1                                                                                         
00003a   0e20     MOVLW     0x20               BOOT_BD_OUT.ADR = (byte*)&dataPacket;   // Set buffer address                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00003c   6f0a     MOVWF     0xa,0x1                                                                                         
00003e   0e04     MOVLW     0x4                                                                                             
000040   6f0b     MOVWF     0xb,0x1                                                                                         
000042   0e88     MOVLW     0x88               BOOT_BD_OUT.Stat._byte = _USIE|_DAT0|_DTSEN;// Set status                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000044   6f08     MOVWF     0x8,0x1                                                                                         
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000046   0104     MOVLB     0x4                BOOT_BD_IN.ADR = (byte*)&dataPacket;    // Set buffer address                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000048   0e20     MOVLW     0x20                                                                                            
00004a   6f0e     MOVWF     0xe,0x1                                                                                         
00004c   0e04     MOVLW     0x4                                                                                             
00004e   6f0f     MOVWF     0xf,0x1                                                                                         
000050   0e40     MOVLW     0x40               BOOT_BD_IN.Stat._byte = _UCPU|_DAT1;    // Set buffer status                 C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000052   6f0c     MOVWF     0xc,0x1                                                                                         
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000054   0012     RETURN    0x0            }//end BootInitEP                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           void StartWrite(void)                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                * A write command can be prematurely terminated by MCLR or WDT reset        C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                */                                                                          C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000056   0e55     MOVLW     0x55               EECON2 = 0x55;                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000058   6ea7     MOVWF     0xa7,0x0                                                                                        
00005a   0eaa     MOVLW     0xaa               EECON2 = 0xAA;                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00005c   6ea7     MOVWF     0xa7,0x0                                                                                        
00005e   82a6     BSF       0xa6,0x1,0x0       EECON1_WR = 1;                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000060   0012     RETURN    0x0            }//end StartWrite                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           void ReadVersion(void) //TESTED: Passed                                          C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000062   0104     MOVLB     0x4                dataPacket._byte[2] = MINOR_VERSION;                                         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000064   6b22     CLRF      0x22,0x1                                                                                        
000066   0e01     MOVLW     0x1                dataPacket._byte[3] = MAJOR_VERSION;                                         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000068   6f23     MOVWF     0x23,0x1                                                                                        
00006a   0012     RETURN    0x0            }//end ReadVersion                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           void ReadProgMem(void) //TESTED: Passed                                          C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00006c   0100     MOVLB     0x0                for (counter = 0; counter < dataPacket.len; counter++)                       C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00006e   6b75     CLRF      0x75,0x1                                                                                        
000070   0104     MOVLB     0x4                                                                                             
000072   5121     MOVF      0x21,0x0,0x1                                                                                    
000074   0100     MOVLB     0x0                                                                                             
000076   5d75     SUBWF     0x75,0x0,0x1                                                                                    
000078   e220     BC        0xba                                                                                            
0000b6   2b75     INCF      0x75,0x1,0x1                                                                                    
0000b8   d7db     BRA       0x70                                                                                            
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                   //2 separate inst prevents compiler from using RAM stack                 C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00007a   c075     MOVFF     0x75,0x0               byteTemp = *((dataPacket.ADR.pAdr)+counter);                             C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00007c   f000                                                                                                               
00007e   6a01     CLRF      0x1,0x0                                                                                         
000080   6a02     CLRF      0x2,0x0                                                                                         
000082   0104     MOVLB     0x4                                                                                             
000084   5122     MOVF      0x22,0x0,0x1                                                                                    
000086   2400     ADDWF     0x0,0x0,0x0                                                                                     
000088   6ef3     MOVWF     0xf3,0x0                                                                                        
00008a   5123     MOVF      0x23,0x0,0x1                                                                                    
00008c   2001     ADDWFC    0x1,0x0,0x0                                                                                     
00008e   6ef4     MOVWF     0xf4,0x0                                                                                        
000090   5124     MOVF      0x24,0x0,0x1                                                                                    
000092   2002     ADDWFC    0x2,0x0,0x0                                                                                     
000094   6ef8     MOVWF     0xf8,0x0                                                                                        
000096   cff4     MOVFF     0xff4,0xff7                                                                                     
000098   fff7                                                                                                               
00009a   cff3     MOVFF     0xff3,0xff6                                                                                     
00009c   fff6                                                                                                               
00009e   0008     TBLRD                                                                                                     
0000a0   cff5     MOVFF     0xff5,0x76                                                                                      
0000a2   f076                                                                                                               
0000a4   0100     MOVLB     0x0                    dataPacket.data[counter] = byteTemp;                                     C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0000a6   5175     MOVF      0x75,0x0,0x1                                                                                    
0000a8   6aea     CLRF      0xea,0x0                                                                                        
0000aa   0f25     ADDLW     0x25                                                                                            
0000ac   6ee9     MOVWF     0xe9,0x0                                                                                        
0000ae   0e04     MOVLW     0x4                                                                                             
0000b0   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0000b2   c076     MOVFF     0x76,0xfef                                                                                      
0000b4   ffef                                                                                                               
                                               }//end for                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0000ba   6af8     CLRF      0xf8,0x0           TBLPTRU = 0x00;         // forces upper byte back to 0x00                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                       // optional fix is to set large code model           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0000bc   0012     RETURN    0x0            }//end ReadProgMem                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           void WriteProgMem(void) //TESTED: Passed                                         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                * The write holding register for the 18F4550 family is                      C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                * actually 32-byte. The code below only tries to write                      C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                * 16-byte because the GUI program only sends out 16-byte                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                * at a time.                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                * This limitation will be fixed in the future version.                      C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                */                                                                          C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0000be   0ef0     MOVLW     0xf0               dataPacket.ADR.low &= 0b11110000;  //Force 16-byte boundary                  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0000c0   0104     MOVLB     0x4                                                                                             
0000c2   1722     ANDWF     0x22,0x1,0x1                                                                                    
0000c4   0e84     MOVLW     0x84               EECON1 = 0b10000100;        //Setup writes: EEPGD=1,WREN=1                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0000c6   6ea6     MOVWF     0xa6,0x0                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                               //LEN = # of byte to write                                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0000c8   0100     MOVLB     0x0                for (counter = 0; counter < (dataPacket.len); counter++)                     C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0000ca   6b75     CLRF      0x75,0x1                                                                                        
0000cc   0104     MOVLB     0x4                                                                                             
0000ce   5121     MOVF      0x21,0x0,0x1                                                                                    
0000d0   0100     MOVLB     0x0                                                                                             
0000d2   5d75     SUBWF     0x75,0x0,0x1                                                                                    
0000d4   e226     BC        0x122                                                                                           
00011c   0100     MOVLB     0x0                                                                                             
00011e   2b75     INCF      0x75,0x1,0x1                                                                                    
000120   d7d5     BRA       0xcc                                                                                            
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0000d6   5175     MOVF      0x75,0x0,0x1           *((dataPacket.ADR.pAdr)+counter) = \                                     C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0000d8   6aea     CLRF      0xea,0x0                                                                                        
0000da   0f25     ADDLW     0x25                                                                                            
0000dc   6ee9     MOVWF     0xe9,0x0                                                                                        
0000de   0e04     MOVLW     0x4                                                                                             
0000e0   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0000e2   cfef     MOVFF     0xfef,0x3                                                                                       
0000e4   f003                                                                                                               
0000e6   c075     MOVFF     0x75,0x0                                                                                        
0000e8   f000                                                                                                               
0000ea   6a01     CLRF      0x1,0x0                                                                                         
0000ec   6a02     CLRF      0x2,0x0                                                                                         
0000ee   0104     MOVLB     0x4                                                                                             
0000f0   5122     MOVF      0x22,0x0,0x1                                                                                    
0000f2   2400     ADDWF     0x0,0x0,0x0                                                                                     
0000f4   6ef3     MOVWF     0xf3,0x0                                                                                        
0000f6   5123     MOVF      0x23,0x0,0x1                                                                                    
0000f8   2001     ADDWFC    0x1,0x0,0x0                                                                                     
0000fa   6ef4     MOVWF     0xf4,0x0                                                                                        
0000fc   5124     MOVF      0x24,0x0,0x1                                                                                    
0000fe   2002     ADDWFC    0x2,0x0,0x0                                                                                     
000100   6ef8     MOVWF     0xf8,0x0                                                                                        
000102   cff4     MOVFF     0xff4,0xff7                                                                                     
000104   fff7                                                                                                               
000106   cff3     MOVFF     0xff3,0xff6                                                                                     
000108   fff6                                                                                                               
00010a   c003     MOVFF     0x3,0xff5                                                                                       
00010c   fff5                                                                                                               
00010e   000c     TBLWT                                                                                                     
                                                   dataPacket.data[counter];                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000110   0e0f     MOVLW     0xf                    if ((counter & 0b00001111) == 0b00001111)                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000112   0100     MOVLB     0x0                                                                                             
000114   1575     ANDWF     0x75,0x0,0x1                                                                                    
000116   080f     SUBLW     0xf                                                                                             
000118   e101     BNZ       0x11c                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00011a   df9d     RCALL     0x56                       StartWrite();                                                        C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                   }//end if                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                               }//end for                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000122   0012     RETURN    0x0            }//end WriteProgMem                                                              C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           void EraseProgMem(void) //TESTED: Passed                                         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                               //The most significant 16 bits of the address pointer points to the block    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                               //being erased. Bits5:0 are ignored. (In hardware).                          C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                               //LEN = # of 64-byte block to erase                                          C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000124   0e94     MOVLW     0x94               EECON1 = 0b10010100;     //Setup writes: EEPGD=1,FREE=1,WREN=1               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000126   6ea6     MOVWF     0xa6,0x0                                                                                        
000128   0100     MOVLB     0x0                for(counter=0; counter < dataPacket.len; counter++)                          C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00012a   6b75     CLRF      0x75,0x1                                                                                        
00012c   0104     MOVLB     0x4                                                                                             
00012e   5121     MOVF      0x21,0x0,0x1                                                                                    
000130   0100     MOVLB     0x0                                                                                             
000132   5d75     SUBWF     0x75,0x0,0x1                                                                                    
000134   e21e     BC        0x172                                                                                           
00016c   0100     MOVLB     0x0                                                                                             
00016e   2b75     INCF      0x75,0x1,0x1                                                                                    
000170   d7dd     BRA       0x12c                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000136   5175     MOVF      0x75,0x0,0x1           *(dataPacket.ADR.pAdr+(((int)counter) << 6));  //Load TBLPTR             C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000138   6e00     MOVWF     0x0,0x0                                                                                         
00013a   6a01     CLRF      0x1,0x0                                                                                         
00013c   0e06     MOVLW     0x6                                                                                             
00013e   90d8     BCF       0xd8,0x0,0x0                                                                                    
000140   3600     RLCF      0x0,0x1,0x0                                                                                     
000142   3601     RLCF      0x1,0x1,0x0                                                                                     
000144   04e8     DECF      0xe8,0x0,0x0                                                                                    
000146   e1fb     BNZ       0x13e                                                                                           
000148   6a02     CLRF      0x2,0x0                                                                                         
00014a   be01     BTFSC     0x1,0x7,0x0                                                                                     
00014c   6802     SETF      0x2,0x0                                                                                         
00014e   0104     MOVLB     0x4                                                                                             
000150   5122     MOVF      0x22,0x0,0x1                                                                                    
000152   2400     ADDWF     0x0,0x0,0x0                                                                                     
000154   6ef3     MOVWF     0xf3,0x0                                                                                        
000156   5123     MOVF      0x23,0x0,0x1                                                                                    
000158   2001     ADDWFC    0x1,0x0,0x0                                                                                     
00015a   6ef4     MOVWF     0xf4,0x0                                                                                        
00015c   5124     MOVF      0x24,0x0,0x1                                                                                    
00015e   2002     ADDWFC    0x2,0x0,0x0                                                                                     
000160   6ef8     MOVWF     0xf8,0x0                                                                                        
000162   cff4     MOVFF     0xff4,0xff7                                                                                     
000164   fff7                                                                                                               
000166   cff3     MOVFF     0xff3,0xff6                                                                                     
000168   fff6                                                                                                               
00016a   df75     RCALL     0x56                   StartWrite();                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                               }//end for                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000172   6af8     CLRF      0xf8,0x0           TBLPTRU = 0;            // forces upper byte back to 0x00                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                       // optional fix is to set large code model           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                       // (for USER ID 0x20 0x00 0x00)                      C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000174   0012     RETURN    0x0            }//end EraseProgMem                                                              C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           void ReadEE(void) //TESTED: Passed                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000176   6aa6     CLRF      0xa6,0x0           EECON1 = 0x00;                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000178   0100     MOVLB     0x0                for(counter=0; counter < dataPacket.len; counter++)                          C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00017a   6b75     CLRF      0x75,0x1                                                                                        
00017c   0104     MOVLB     0x4                                                                                             
00017e   5121     MOVF      0x21,0x0,0x1                                                                                    
000180   0100     MOVLB     0x0                                                                                             
000182   5d75     SUBWF     0x75,0x0,0x1                                                                                    
000184   e210     BC        0x1a6                                                                                           
0001a2   2b75     INCF      0x75,0x1,0x1                                                                                    
0001a4   d7eb     BRA       0x17c                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000186   0104     MOVLB     0x4                    EEADR = (byte)dataPacket.ADR.pAdr + counter;                             C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000188   5122     MOVF      0x22,0x0,0x1                                                                                    
00018a   0100     MOVLB     0x0                                                                                             
00018c   2575     ADDWF     0x75,0x0,0x1                                                                                    
00018e   6ea9     MOVWF     0xa9,0x0                                                                                        
                                                   //EEADRH = (BYTE)(((int)dataPacket.FIELD.ADDR.POINTER + counter) >> 8);  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000190   80a6     BSF       0xa6,0x0,0x0           EECON1_RD = 1;                                                           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000192   5175     MOVF      0x75,0x0,0x1           dataPacket.data[counter] = EEDATA;                                       C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000194   6aea     CLRF      0xea,0x0                                                                                        
000196   0f25     ADDLW     0x25                                                                                            
000198   6ee9     MOVWF     0xe9,0x0                                                                                        
00019a   0e04     MOVLW     0x4                                                                                             
00019c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00019e   cfa8     MOVFF     0xfa8,0xfef                                                                                     
0001a0   ffef                                                                                                               
                                               }//end for                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0001a6   0012     RETURN    0x0            }//end ReadEE                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           void WriteEE(void) //TESTED: Passed                                              C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0001a8   0100     MOVLB     0x0                for(counter=0; counter < dataPacket.len; counter++)                          C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0001aa   6b75     CLRF      0x75,0x1                                                                                        
0001ac   0104     MOVLB     0x4                                                                                             
0001ae   5121     MOVF      0x21,0x0,0x1                                                                                    
0001b0   0100     MOVLB     0x0                                                                                             
0001b2   5d75     SUBWF     0x75,0x0,0x1                                                                                    
0001b4   e215     BC        0x1e0                                                                                           
0001da   0100     MOVLB     0x0                                                                                             
0001dc   2b75     INCF      0x75,0x1,0x1                                                                                    
0001de   d7e6     BRA       0x1ac                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0001b6   0104     MOVLB     0x4                    EEADR = (byte)dataPacket.ADR.pAdr + counter;                             C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0001b8   5122     MOVF      0x22,0x0,0x1                                                                                    
0001ba   0100     MOVLB     0x0                                                                                             
0001bc   2575     ADDWF     0x75,0x0,0x1                                                                                    
0001be   6ea9     MOVWF     0xa9,0x0                                                                                        
                                                   //EEADRH = (BYTE)(((int)dataPacket.FIELD.ADDR.POINTER + counter) >> 8);  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0001c0   5175     MOVF      0x75,0x0,0x1           EEDATA = dataPacket.data[counter];                                       C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0001c2   6aea     CLRF      0xea,0x0                                                                                        
0001c4   0f25     ADDLW     0x25                                                                                            
0001c6   6ee9     MOVWF     0xe9,0x0                                                                                        
0001c8   0e04     MOVLW     0x4                                                                                             
0001ca   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0001cc   50ef     MOVF      0xef,0x0,0x0                                                                                    
0001ce   6ea8     MOVWF     0xa8,0x0                                                                                        
0001d0   0e04     MOVLW     0x4                    EECON1 = 0b00000100;    //Setup writes: EEPGD=0,WREN=1                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0001d2   6ea6     MOVWF     0xa6,0x0                                                                                        
0001d4   df40     RCALL     0x56                   StartWrite();                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0001d6   b2a6     BTFSC     0xa6,0x1,0x0           while(EECON1_WR);       //Wait till WR bit is clear                      C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0001d8   d7fe     BRA       0x1d6                                                                                           
                                               }//end for                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0001e0   0012     RETURN    0x0            }//end WriteEE                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           //WriteConfig is different from WriteProgMem b/c it can write a byte             C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           void WriteConfig(void) //TESTED: Passed                                          C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0001e2   0ec4     MOVLW     0xc4               EECON1 = 0b11000100;        //Setup writes: EEPGD=1,CFGS=1,WREN=1            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0001e4   6ea6     MOVWF     0xa6,0x0                                                                                        
0001e6   0100     MOVLB     0x0                for (counter = 0; counter < dataPacket.len; counter++)                       C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0001e8   6b75     CLRF      0x75,0x1                                                                                        
0001ea   0104     MOVLB     0x4                                                                                             
0001ec   5121     MOVF      0x21,0x0,0x1                                                                                    
0001ee   0100     MOVLB     0x0                                                                                             
0001f0   5d75     SUBWF     0x75,0x0,0x1                                                                                    
0001f2   e221     BC        0x236                                                                                           
000230   0100     MOVLB     0x0                                                                                             
000232   2b75     INCF      0x75,0x1,0x1                                                                                    
000234   d7da     BRA       0x1ea                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0001f4   5175     MOVF      0x75,0x0,0x1           *((dataPacket.ADR.pAdr)+counter) = \                                     C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0001f6   6aea     CLRF      0xea,0x0                                                                                        
0001f8   0f25     ADDLW     0x25                                                                                            
0001fa   6ee9     MOVWF     0xe9,0x0                                                                                        
0001fc   0e04     MOVLW     0x4                                                                                             
0001fe   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000200   cfef     MOVFF     0xfef,0x3                                                                                       
000202   f003                                                                                                               
000204   c075     MOVFF     0x75,0x0                                                                                        
000206   f000                                                                                                               
000208   6a01     CLRF      0x1,0x0                                                                                         
00020a   6a02     CLRF      0x2,0x0                                                                                         
00020c   0104     MOVLB     0x4                                                                                             
00020e   5122     MOVF      0x22,0x0,0x1                                                                                    
000210   2400     ADDWF     0x0,0x0,0x0                                                                                     
000212   6ef3     MOVWF     0xf3,0x0                                                                                        
000214   5123     MOVF      0x23,0x0,0x1                                                                                    
000216   2001     ADDWFC    0x1,0x0,0x0                                                                                     
000218   6ef4     MOVWF     0xf4,0x0                                                                                        
00021a   5124     MOVF      0x24,0x0,0x1                                                                                    
00021c   2002     ADDWFC    0x2,0x0,0x0                                                                                     
00021e   6ef8     MOVWF     0xf8,0x0                                                                                        
000220   cff4     MOVFF     0xff4,0xff7                                                                                     
000222   fff7                                                                                                               
000224   cff3     MOVFF     0xff3,0xff6                                                                                     
000226   fff6                                                                                                               
000228   c003     MOVFF     0x3,0xff5                                                                                       
00022a   fff5                                                                                                               
00022c   000c     TBLWT                                                                                                     
                                                   dataPacket.data[counter];                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00022e   df13     RCALL     0x56                   StartWrite();                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                               }//end for                                                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000236   6af8     CLRF      0xf8,0x0           TBLPTRU = 0x00;         // forces upper byte back to 0x00                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                       // optional fix is to set large code model           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000238   0012     RETURN    0x0            }//end WriteConfig                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           void BootService(void)                                                           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00023a   d897     RCALL     0x36a              BlinkUSBStatus();                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00023c   0e06     MOVLW     0x6                if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;      C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00023e   0100     MOVLB     0x0                                                                                             
000240   5d7a     SUBWF     0x7a,0x0,0x1                                                                                    
000242   e303     BNC       0x24a                                                                                           
000244   506d     MOVF      0x6d,0x0,0x0                                                                                    
000246   0b02     ANDLW     0x2                                                                                             
000248   e001     BZ        0x24c                                                                                           
00024a   d08e     BRA       0x368                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00024c   0100     MOVLB     0x0                if(trf_state == SENDING_RESP)                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00024e   0577     DECF      0x77,0x0,0x1                                                                                    
000250   e111     BNZ       0x274                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000252   0104     MOVLB     0x4                    if(!mBootTxIsBusy())                                                     C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000254   bf0c     BTFSC     0xc,0x7,0x1                                                                                     
000256   d00d     BRA       0x272                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000258   0104     MOVLB     0x4                        BOOT_BD_OUT.Cnt = sizeof(dataPacket);                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00025a   0e40     MOVLW     0x40                                                                                            
00025c   6f09     MOVWF     0x9,0x1                                                                                         
00025e   0e40     MOVLW     0x40                       mUSBBufferReady(BOOT_BD_OUT);                                        C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000260   0104     MOVLB     0x4                                                                                             
000262   1708     ANDWF     0x8,0x1,0x1                                                                                     
000264   0104     MOVLB     0x4                                                                                             
000266   7d08     BTG       0x8,0x6,0x1                                                                                     
000268   0e88     MOVLW     0x88                                                                                            
00026a   0104     MOVLB     0x4                                                                                             
00026c   1308     IORWF     0x8,0x1,0x1                                                                                     
00026e   0100     MOVLB     0x0                        trf_state = WAIT_FOR_CMD;                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000270   6b77     CLRF      0x77,0x1                                                                                        
                                                   }//end if                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000272   d07a     BRA       0x368                  return;                                                                  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                               }//end if                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000274   0104     MOVLB     0x4                if(!mBootRxIsBusy())                                                         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000276   bf08     BTFSC     0x8,0x7,0x1                                                                                     
000278   d077     BRA       0x368                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00027a   0100     MOVLB     0x0                    counter = 0;                                                             C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00027c   6b75     CLRF      0x75,0x1                                                                                        
00027e   0104     MOVLB     0x4                    switch(dataPacket.CMD)                                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000280   5120     MOVF      0x20,0x0,0x1                                                                                    
000282   0a32     XORLW     0x32                                                                                            
000284   e045     BZ        0x310                                                                                           
000286   0acd     XORLW     0xcd                                                                                            
000288   e034     BZ        0x2f2                                                                                           
00028a   0af8     XORLW     0xf8                                                                                            
00028c   e02d     BZ        0x2e8                                                                                           
00028e   0a02     XORLW     0x2                                                                                             
000290   e026     BZ        0x2de                                                                                           
000292   0a01     XORLW     0x1                                                                                             
000294   e01f     BZ        0x2d4                                                                                           
000296   0a07     XORLW     0x7                                                                                             
000298   e018     BZ        0x2ca                                                                                           
00029a   0a01     XORLW     0x1                                                                                             
00029c   e011     BZ        0x2c0                                                                                           
00029e   0a03     XORLW     0x3                                                                                             
0002a0   e00a     BZ        0x2b6                                                                                           
0002a2   0a07     XORLW     0x7                                                                                             
0002a4   e008     BZ        0x2b6                                                                                           
0002a6   0a06     XORLW     0x6                                                                                             
0002a8   e001     BZ        0x2ac                                                                                           
0002aa   d04d     BRA       0x346                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                       case READ_VERSION:                                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002ac   deda     RCALL     0x62                           ReadVersion();                                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002ae   0100     MOVLB     0x0                            counter=0x04;                                                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002b0   0e04     MOVLW     0x4                                                                                             
0002b2   6f75     MOVWF     0x75,0x1                                                                                        
0002b4   d049     BRA       0x348                          break;                                                           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                       case READ_FLASH:                                                     C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                       case READ_CONFIG:                                                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002b6   deda     RCALL     0x6c                           ReadProgMem();                                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002b8   0e05     MOVLW     0x5                            counter+=0x05;                                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002ba   0100     MOVLB     0x0                                                                                             
0002bc   2775     ADDWF     0x75,0x1,0x1                                                                                    
0002be   d044     BRA       0x348                          break;                                                           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                       case WRITE_FLASH:                                                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002c0   defe     RCALL     0xbe                           WriteProgMem();                                                  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002c2   0100     MOVLB     0x0                            counter=0x01;                                                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002c4   0e01     MOVLW     0x1                                                                                             
0002c6   6f75     MOVWF     0x75,0x1                                                                                        
0002c8   d03f     BRA       0x348                          break;                                                           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                       case ERASE_FLASH:                                                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002ca   df2c     RCALL     0x124                          EraseProgMem();                                                  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002cc   0100     MOVLB     0x0                            counter=0x01;                                                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002ce   0e01     MOVLW     0x1                                                                                             
0002d0   6f75     MOVWF     0x75,0x1                                                                                        
0002d2   d03a     BRA       0x348                          break;                                                           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                       case READ_EEDATA:                                                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002d4   df50     RCALL     0x176                          ReadEE();                                                        C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002d6   0e05     MOVLW     0x5                            counter+=0x05;                                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002d8   0100     MOVLB     0x0                                                                                             
0002da   2775     ADDWF     0x75,0x1,0x1                                                                                    
0002dc   d035     BRA       0x348                          break;                                                           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                       case WRITE_EEDATA:                                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002de   df64     RCALL     0x1a8                          WriteEE();                                                       C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002e0   0100     MOVLB     0x0                            counter=0x01;                                                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002e2   0e01     MOVLW     0x1                                                                                             
0002e4   6f75     MOVWF     0x75,0x1                                                                                        
0002e6   d030     BRA       0x348                          break;                                                           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                       case WRITE_CONFIG:                                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002e8   df7c     RCALL     0x1e2                          WriteConfig();                                                   C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002ea   0100     MOVLB     0x0                            counter=0x01;                                                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002ec   0e01     MOVLW     0x1                                                                                             
0002ee   6f75     MOVWF     0x75,0x1                                                                                        
0002f0   d02b     BRA       0x348                          break;                                                           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                       case RESET:                                                          C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                           //When resetting, make sure to drop the device off the bus       C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                           //for a period of time. Helps when the device is suspended.      C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002f2   966d     BCF       0x6d,0x3,0x0                   UCONbits.USBEN = 0;                                              C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002f4   0100     MOVLB     0x0                            big_counter = 0;                                                 C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002f6   6b78     CLRF      0x78,0x1                                                                                        
0002f8   6b79     CLRF      0x79,0x1                                                                                        
0002fa   0100     MOVLB     0x0                            while(--big_counter);                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
0002fc   0778     DECF      0x78,0x1,0x1                                                                                    
0002fe   0e00     MOVLW     0x0                                                                                             
000300   5b79     SUBWFB    0x79,0x1,0x1                                                                                    
000302   0100     MOVLB     0x0                                                                                             
000304   5178     MOVF      0x78,0x0,0x1                                                                                    
000306   1179     IORWF     0x79,0x0,0x1                                                                                    
000308   e001     BZ        0x30c                                                                                           
00030a   d7f7     BRA       0x2fa                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00030c   00ff     RESET                                    Reset();                                                         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00030e   d01c     BRA       0x348                          break;                                                           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                       case UPDATE_LED:                                                     C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000310   0e03     MOVLW     0x3                            if(dataPacket.led_num == 3)                                      C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000312   0104     MOVLB     0x4                                                                                             
000314   5d21     SUBWF     0x21,0x0,0x1                                                                                    
000316   e109     BNZ       0x32a                                                                                           
                                                           {                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000318   0104     MOVLB     0x4                                mLED_3 = dataPacket.led_status;                              C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00031a   5122     MOVF      0x22,0x0,0x1                                                                                    
00031c   b0e8     BTFSC     0xe8,0x0,0x0                                                                                    
00031e   8e8b     BSF       0x8b,0x7,0x0                                                                                    
000320   a0e8     BTFSS     0xe8,0x0,0x0                                                                                    
000322   9e8b     BCF       0x8b,0x7,0x0                                                                                    
000324   0100     MOVLB     0x0                                counter = 0x01;                                              C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000326   0e01     MOVLW     0x1                                                                                             
000328   6f75     MOVWF     0x75,0x1                                                                                        
                                                           }//end if                                                        C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00032a   0e04     MOVLW     0x4                            if(dataPacket.led_num == 4)                                      C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00032c   0104     MOVLB     0x4                                                                                             
00032e   5d21     SUBWF     0x21,0x0,0x1                                                                                    
000330   e109     BNZ       0x344                                                                                           
                                                           {                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000332   0104     MOVLB     0x4                                mLED_4 = dataPacket.led_status;                              C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000334   5122     MOVF      0x22,0x0,0x1                                                                                    
000336   b0e8     BTFSC     0xe8,0x0,0x0                                                                                    
000338   8c8b     BSF       0x8b,0x6,0x0                                                                                    
00033a   a0e8     BTFSS     0xe8,0x0,0x0                                                                                    
00033c   9c8b     BCF       0x8b,0x6,0x0                                                                                    
00033e   0100     MOVLB     0x0                                counter = 0x01;                                              C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000340   0e01     MOVLW     0x1                                                                                             
000342   6f75     MOVWF     0x75,0x1                                                                                        
                                                           }//end if                                                        C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000344   d001     BRA       0x348                          break;                                                           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                       default:                                                             C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000346   d000     BRA       0x348                          break;                                                           C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                   }//end switch()                                                          C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000348   0100     MOVLB     0x0                    trf_state = SENDING_RESP;                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00034a   0e01     MOVLW     0x1                                                                                             
00034c   6f77     MOVWF     0x77,0x1                                                                                        
00034e   0100     MOVLB     0x0                    if(counter != 0)                                                         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000350   5175     MOVF      0x75,0x0,0x1                                                                                    
000352   e00a     BZ        0x368                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000354   c075     MOVFF     0x75,0x40d                 BOOT_BD_IN.Cnt = counter;                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000356   f40d                                                                                                               
000358   0e40     MOVLW     0x40                       mUSBBufferReady(BOOT_BD_IN);                                         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00035a   0104     MOVLB     0x4                                                                                             
00035c   170c     ANDWF     0xc,0x1,0x1                                                                                     
00035e   0104     MOVLB     0x4                                                                                             
000360   7d0c     BTG       0xc,0x6,0x1                                                                                     
000362   0e88     MOVLW     0x88                                                                                            
000364   0104     MOVLB     0x4                                                                                             
000366   130c     IORWF     0xc,0x1,0x1                                                                                     
                                                   }//end if                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                               }//end if                                                                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
000368   0012     RETURN    0x0            }//end BootService                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Function:        void BlinkUSBStatus(void)                                    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Overview:        BlinkUSBStatus turns on and off LEDs corresponding to        C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                  the USB device state.                                        C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                                                                               C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            * Note:            mLED macros can be found in io_cfg.h                         C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                  usb_device_state is declared in usbmmap.c and is modified    C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *                  in usbdrv.c, usbctrltrf.c, and usb9.c                        C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           void BlinkUSBStatus(void)                                                        C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           {                                                                                C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00036a   506d     MOVF      0x6d,0x0,0x0       if(UCONbits.SUSPND != 1 && usb_device_state == CONFIGURED_STATE)             C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00036c   0b02     ANDLW     0x2                                                                                             
00036e   e105     BNZ       0x37a                                                                                           
000370   0e06     MOVLW     0x6                                                                                             
000372   0100     MOVLB     0x0                                                                                             
000374   5d7a     SUBWF     0x7a,0x0,0x1                                                                                    
000376   e101     BNZ       0x37a                                                                                           
000378   8c8b     BSF       0x8b,0x6,0x0   			mLED_2_On();                                                                  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                                                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
00037a   0012     RETURN    0x0            }//end BlinkUSBStatus                                                            C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                           /** EOF boot.c ***************************************************************/  C:\MCHPFSUSB\fw\Boot\system\usb\class\boot\boot.c
                                                   LIST P=18F2550                                                           C:\MCC18\src\traditional\proc\p18f2550.asm
                                                   LIST                                                                     C:\MCC18\src\traditional\proc\p18f2550.asm
                                                   END                                                                      C:\MCC18\src\traditional\proc\p18f2550.asm
                                           ;	RCS Header $Id: cmath18.asm,v 1.5 2006/01/12 23:16:38 rhinec Exp $             C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\cmath18.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\src\traditional\math\cmath18.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                           SIGN		RES 1       ; save location for sign in MSB                                C:\MCC18\src\traditional\math\cmath18.asm
                                           __FPFLAGSbits                                                                    C:\MCC18\src\traditional\math\cmath18.asm
                                           __FPFLAGS		RES 1       ; floating point library exception flags                  C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                                   GLOBAL  SIGN, __FPFLAGS, __FPFLAGSbits                                   C:\MCC18\src\traditional\math\cmath18.asm
                                           	                                                                                C:\MCC18\src\traditional\math\cmath18.asm
                                                   END                                                                      C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\stdclib\__init.c
                                           /** @name __init                                                                 C:\MCC18\src\traditional\stdclib\__init.c
                                            * The {\bf __init} is called if the linker can not find a                       C:\MCC18\src\traditional\stdclib\__init.c
                                            * user defined version for it                                                   C:\MCC18\src\traditional\stdclib\__init.c
                                            */                                                                              C:\MCC18\src\traditional\stdclib\__init.c
                                                                                                                            C:\MCC18\src\traditional\stdclib\__init.c
                                           void __init (void)                                                               C:\MCC18\src\traditional\stdclib\__init.c
                                           {                                                                                C:\MCC18\src\traditional\stdclib\__init.c
000808   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\stdclib\__init.c
                                                                                                                            C:\MCC18\src\traditional\stdclib\__init.c
